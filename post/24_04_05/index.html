<!DOCTYPE html>
<html lang='en'><head>
  <title>Serv00搭建各种服务 - 雨过天晴</title>
  <link rel='canonical' href='https://hugo.123450908.xyz/post/24_04_05/' />
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1' />
  <meta name='description' content='Exaplanation on the shortcodes with personal-web' />
  <meta name='theme-color' content='#FD3519' />
  

  <meta name="generator" content="Hugo 0.133.1">

  





<link rel="stylesheet" href="https://hugo.123450908.xyz/sass/style.min.eabe1aa4bd266a15f7b39b122bd6a5cc75cb067e5373631ac21d7815d6240d6f.css" integrity="sha256-6r4apL0mahX3s5sSK9alzHXLBn5Tc2Mawh14FdYkDW8=" media="screen">
<link rel="stylesheet" href="https://hugo.123450908.xyz/syntax.min.css" integrity="" media="screen">

  <meta property="og:url" content="https://hugo.123450908.xyz/post/24_04_05/">
  <meta property="og:site_name" content="雨过天晴">
  <meta property="og:title" content="Serv00搭建各种服务">
  <meta property="og:description" content="Exaplanation on the shortcodes with personal-web">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2024-04-05T06:28:40+00:00">
    <meta property="article:modified_time" content="2024-04-05T06:28:40+00:00">

  
  <meta itemprop="name" content="Serv00搭建各种服务">
  <meta itemprop="description" content="Exaplanation on the shortcodes with personal-web">
  <meta itemprop="datePublished" content="2024-04-05T06:28:40+00:00">
  <meta itemprop="dateModified" content="2024-04-05T06:28:40+00:00">
  <meta itemprop="wordCount" content="4273">
</head>
<body>

  <header style="background-image:linear-gradient(
      rgba(0,0,0,0.4),rgba(0,0,0,0.4)
    ),url(&#39;https://hugo.123450908.xyz/images/default-sidebar.jpg&#39;)">
  <div class="intro">
    <div class="logo-container">
      <a href="/">
        <img src='https://hugo.123450908.xyz/images/edna-west.jpg' alt="Profile Designs" class="rounded-logo">
      </a>
    </div>
    <h2>Hi, I'm Djd</h2>
    <h3>I'm learning Linux and Termux and i like Photography</h3>
    <div class="menu">
      

        <p>
            <a href="/about/">
                关于
            </a>
        </p>

        <p>
            <a href="/portfolio/">
                视频日记
            </a>
        </p>

        <p>
            <a href="/post/">
                文章
            </a>
        </p>

      
        
        <p>
            <a href="mailto:djd@1226.163.com" target="_blank" rel="external">
                Email to me
            </a>
        </p>
      
    </div>
  </div>

  <div class="socials">
      
  
    <a href="https://djd1226.github.io/" class="social-link" target="_blank" rel="noopener" ><div class="icon">
  <svg width="35px" height="35px" viewBox="0 0 115 115" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
  
  <path d="M102.679 0H12.32C5.52 0 0 5.519 0 12.321v90.358C0 109.48 5.519 115 12.321 115h90.358c6.802 0 12.321-5.519 12.321-12.321V12.32C115 5.52 109.481 0 102.679 0zM71.182 98.494c-2.156.385-2.952-.95-2.952-2.053 0-1.386.051-8.471.051-14.195 0-4.005-1.335-6.546-2.9-7.881C74.878 73.313 84.89 72.003 84.89 55.6c0-4.671-1.669-7.007-4.39-10.01.436-1.105 1.9-5.648-.436-11.552-3.568-1.104-11.731 4.595-11.731 4.595-3.389-.95-7.06-1.438-10.679-1.438-3.62 0-7.29.488-10.679 1.438 0 0-8.163-5.699-11.73-4.595-2.337 5.878-.899 10.422-.437 11.551-2.72 3.004-4.004 5.34-4.004 10.011 0 16.326 9.574 17.712 19.072 18.765-1.232 1.104-2.336 3.003-2.72 5.724-2.44 1.104-8.677 3.004-12.4-3.568-2.335-4.056-6.545-4.39-6.545-4.39-4.159-.05-.282 2.619-.282 2.619 2.772 1.283 4.723 6.212 4.723 6.212 2.49 7.624 14.4 5.057 14.4 5.057 0 3.568.052 9.37.052 10.422 0 1.104-.77 2.438-2.952 2.053C27.21 92.821 15.35 76.701 15.35 57.86c0-23.564 18.02-41.456 41.585-41.456s42.663 17.892 42.663 41.456c.026 18.842-11.474 34.988-28.416 40.635zM46 82.81c-.488.103-.95-.102-1.001-.436-.051-.385.282-.719.77-.822.488-.05.95.154 1.001.488.077.334-.257.668-.77.77zm-2.439-.23c0 .333-.385.615-.898.615-.565.052-.95-.23-.95-.616 0-.333.385-.616.899-.616.487-.051.95.231.95.616zm-3.516-.283c-.103.334-.616.488-1.053.334-.488-.103-.821-.488-.719-.822.103-.334.617-.488 1.053-.385.513.154.847.54.719.873zm-3.158-1.386c-.23.282-.718.23-1.104-.154-.385-.334-.487-.822-.23-1.053.23-.282.718-.23 1.103.154.334.334.462.847.231 1.053zm-2.336-2.336c-.23.154-.667 0-.95-.385-.282-.385-.282-.822 0-1.001.283-.231.72-.052.95.333.283.385.283.847 0 1.053zm-1.668-2.49c-.231.23-.616.103-.899-.154-.282-.334-.333-.719-.102-.899.23-.23.616-.102.898.154.282.334.334.72.103.899zm-1.72-1.9c-.103.231-.436.283-.719.103-.334-.154-.488-.436-.385-.667.103-.154.385-.231.719-.103.334.18.488.462.385.667z"/>
  
  </svg>
</div>
</a>
  

  
    <a href="https://www.youtube.com/" class="social-link" target="_blank" rel="noopener" ><div class="icon">
  <svg width="35px" height="35px" viewBox="0 0 115 115" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
  
  <path d="M47.95 43.664l24.438 13.887L47.951 71.44V43.664zM115 12.321v90.358c0 6.802-5.519 12.321-12.321 12.321H12.32C5.52 115 0 109.481 0 102.679V12.32C0 5.52 5.519 0 12.321 0h90.358C109.48 0 115 5.519 115 12.321zm-10.781 45.256s0-15.3-1.951-22.64c-1.078-4.056-4.236-7.24-8.266-8.318-7.264-1.976-36.502-1.976-36.502-1.976s-29.238 0-36.502 1.976c-4.03 1.079-7.188 4.262-8.266 8.317-1.95 7.316-1.95 22.641-1.95 22.641s0 15.3 1.95 22.64c1.078 4.056 4.236 7.111 8.266 8.19 7.264 1.95 36.502 1.95 36.502 1.95s29.238 0 36.502-1.976c4.03-1.079 7.188-4.133 8.266-8.189 1.95-7.316 1.95-22.615 1.95-22.615z" />
  
  </svg>
</div>
</a>
  

  </div>
</header>

<div class="mobile-header">
  <p> 雨过天晴 </p>
  <div class="hamburger">
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
  </div>
</div>

<div class="overlay-menu">
  <header>
    <div class="intro">
      <div class="logo-container">
        <a href="/">
          <img src='https://hugo.123450908.xyz/images/edna-west.jpg' alt="Profile Designs" class="rounded-logo">
        </a>
      </div>
      <h2>Hi, I'm Djd</h2>
      <h3>I'm learning Linux and Termux and i like Photography</h3>
      <div class="menu">
        

        <p>
            <a href="/about/">
                关于
            </a>
        </p>

        <p>
            <a href="/portfolio/">
                视频日记
            </a>
        </p>

        <p>
            <a href="/post/">
                文章
            </a>
        </p>

        
          
          <p>
              <a href="mailto:djd@1226.163.com" target="_blank" rel="external">
                  Email to me
              </a>
          </p>
        
      </div>
    </div>

    <div class="socials">
        
  
    <a href="https://djd1226.github.io/" class="social-link" target="_blank" rel="noopener" ><div class="icon">
  <svg width="35px" height="35px" viewBox="0 0 115 115" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
  
  <path d="M102.679 0H12.32C5.52 0 0 5.519 0 12.321v90.358C0 109.48 5.519 115 12.321 115h90.358c6.802 0 12.321-5.519 12.321-12.321V12.32C115 5.52 109.481 0 102.679 0zM71.182 98.494c-2.156.385-2.952-.95-2.952-2.053 0-1.386.051-8.471.051-14.195 0-4.005-1.335-6.546-2.9-7.881C74.878 73.313 84.89 72.003 84.89 55.6c0-4.671-1.669-7.007-4.39-10.01.436-1.105 1.9-5.648-.436-11.552-3.568-1.104-11.731 4.595-11.731 4.595-3.389-.95-7.06-1.438-10.679-1.438-3.62 0-7.29.488-10.679 1.438 0 0-8.163-5.699-11.73-4.595-2.337 5.878-.899 10.422-.437 11.551-2.72 3.004-4.004 5.34-4.004 10.011 0 16.326 9.574 17.712 19.072 18.765-1.232 1.104-2.336 3.003-2.72 5.724-2.44 1.104-8.677 3.004-12.4-3.568-2.335-4.056-6.545-4.39-6.545-4.39-4.159-.05-.282 2.619-.282 2.619 2.772 1.283 4.723 6.212 4.723 6.212 2.49 7.624 14.4 5.057 14.4 5.057 0 3.568.052 9.37.052 10.422 0 1.104-.77 2.438-2.952 2.053C27.21 92.821 15.35 76.701 15.35 57.86c0-23.564 18.02-41.456 41.585-41.456s42.663 17.892 42.663 41.456c.026 18.842-11.474 34.988-28.416 40.635zM46 82.81c-.488.103-.95-.102-1.001-.436-.051-.385.282-.719.77-.822.488-.05.95.154 1.001.488.077.334-.257.668-.77.77zm-2.439-.23c0 .333-.385.615-.898.615-.565.052-.95-.23-.95-.616 0-.333.385-.616.899-.616.487-.051.95.231.95.616zm-3.516-.283c-.103.334-.616.488-1.053.334-.488-.103-.821-.488-.719-.822.103-.334.617-.488 1.053-.385.513.154.847.54.719.873zm-3.158-1.386c-.23.282-.718.23-1.104-.154-.385-.334-.487-.822-.23-1.053.23-.282.718-.23 1.103.154.334.334.462.847.231 1.053zm-2.336-2.336c-.23.154-.667 0-.95-.385-.282-.385-.282-.822 0-1.001.283-.231.72-.052.95.333.283.385.283.847 0 1.053zm-1.668-2.49c-.231.23-.616.103-.899-.154-.282-.334-.333-.719-.102-.899.23-.23.616-.102.898.154.282.334.334.72.103.899zm-1.72-1.9c-.103.231-.436.283-.719.103-.334-.154-.488-.436-.385-.667.103-.154.385-.231.719-.103.334.18.488.462.385.667z"/>
  
  </svg>
</div>
</a>
  

  
    <a href="https://www.youtube.com/" class="social-link" target="_blank" rel="noopener" ><div class="icon">
  <svg width="35px" height="35px" viewBox="0 0 115 115" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
  
  <path d="M47.95 43.664l24.438 13.887L47.951 71.44V43.664zM115 12.321v90.358c0 6.802-5.519 12.321-12.321 12.321H12.32C5.52 115 0 109.481 0 102.679V12.32C0 5.52 5.519 0 12.321 0h90.358C109.48 0 115 5.519 115 12.321zm-10.781 45.256s0-15.3-1.951-22.64c-1.078-4.056-4.236-7.24-8.266-8.318-7.264-1.976-36.502-1.976-36.502-1.976s-29.238 0-36.502 1.976c-4.03 1.079-7.188 4.262-8.266 8.317-1.95 7.316-1.95 22.641-1.95 22.641s0 15.3 1.95 22.64c1.078 4.056 4.236 7.111 8.266 8.19 7.264 1.95 36.502 1.95 36.502 1.95s29.238 0 36.502-1.976c4.03-1.079 7.188-4.133 8.266-8.189 1.95-7.316 1.95-22.615 1.95-22.615z" />
  
  </svg>
</div>
</a>
  

    </div>
  </header>
</div>

  <div class="content-wrapper">
    
      <div class="breadcrumb">
  





<span >
  <a href="https://hugo.123450908.xyz/">HOME</a>
   / 
</span>


<span >
  <a href="https://hugo.123450908.xyz/post/">文章</a>
   / 
</span>


<span  class="active">
  <a href="https://hugo.123450908.xyz/post/24_04_05/">Serv00搭建各种服务</a>
  
</span>

</div>

    
    <main id="content" class="post">

<h1>Serv00搭建各种服务</h1>
<div class="reading-time">
  <div class="icon">
  <svg width="18px" height="18px" viewBox="0 0 115 115" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
  
  <path d="M57.5 11C29.05 11 6 34.05 6 62.5S29.05 114 57.5 114 109 90.95 109 62.5 85.95 11 57.5 11zm0 93.032c-22.947 0-41.532-18.585-41.532-41.532 0-22.947 18.585-41.532 41.532-41.532 22.947 0 41.532 18.585 41.532 41.532 0 22.947-18.585 41.532-41.532 41.532zm12.833-21.68L52.703 69.54a2.508 2.508 0 0 1-1.018-2.015V33.427a2.5 2.5 0 0 1 2.492-2.492h6.646a2.5 2.5 0 0 1 2.492 2.492v29.426l13.871 10.092c1.122.81 1.35 2.368.54 3.49l-3.904 5.377a2.51 2.51 0 0 1-3.489.54z"/>
  
  </svg>
</div>

  <span>21 minutes</span>
</div>

<div class="published-date">
  <div class="icon">
  <svg width="18px" height="18px" viewBox="0 0 115 115" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
  
  <path d="M77.577 51.23a1.807 1.807 0 0 0-2.2.342l-27.562 27.79a1.807 1.807 0 0 1-2.2.342l-14.008-9.702a1.807 1.807 0 0 0-2.2.342l-1.952 1.968c-.287.22-.456.568-.455.936.001.37.172.716.46.934L45.637 86.77a1.807 1.807 0 0 0 2.2-.342l31.709-31.97c.287-.22.456-.567.455-.936a1.175 1.175 0 0 0-.46-.933l-1.963-1.36z"/><path d="M97.304 20H80.512c-.041.34-.063.683-.064 1.026a5.986 5.986 0 0 0 1.256 4.1c.054.003.103.02.157.025a4.881 4.881 0 0 1 1.865-.025c3.05.562 4.984 3.907 4.32 7.47-.666 3.563-3.678 5.996-6.728 5.433a4.932 4.932 0 0 1-2.437-1.258c-6.018-1.378-10.445-7.795-10.445-15.745 0-.347.023-.685.04-1.026H34.579c-.041.34-.063.683-.064 1.026a5.986 5.986 0 0 0 1.256 4.1c.054.003.103.02.157.025a4.881 4.881 0 0 1 1.865-.025c3.05.562 4.984 3.907 4.32 7.47-.666 3.563-3.678 5.996-6.728 5.433a4.932 4.932 0 0 1-2.437-1.258c-6.018-1.378-10.445-7.795-10.445-15.745 0-.22.019-.434.025-.652a9.788 9.788 0 0 0-5.697 4.471 9.683 9.683 0 0 0-2.65 4.764L1.158 92.871c-.965 4.689 2.6 8.503 7.948 8.503h6.334v2.673c-.077 5.41 4.263 9.861 9.705 9.953h72.16c5.438-.095 9.774-4.546 9.694-9.953V29.953c.08-5.407-4.256-9.858-9.695-9.953zM10.078 96.653c-2.378 0-3.964-1.697-3.535-3.782L16.637 43.84h80.787L87.331 92.871a5.254 5.254 0 0 1-5.091 3.782H10.078zm91.535 7.394c.036 2.403-1.891 4.382-4.308 4.424h-72.16c-2.42-.04-4.352-2.018-4.32-4.424v-2.673h60.443c5.348 0 10.484-3.814 11.449-8.503l8.897-43.215v54.391z"/><path d="M34.814 33c1.243 0 2.251-1.057 2.251-2.36 0-1.305-1.008-2.362-2.25-2.362-2.04 0-4.313-3.194-4.313-7.778s2.272-7.778 4.312-7.778c1.227 0 2.536 1.163 3.386 3.084H43C41.716 11.19 38.578 8 34.814 8 29.871 8 26 13.49 26 20.5c0 7.009 3.871 12.5 8.814 12.5z"/>
  
  </svg>
</div>

  <span>April 5, 2024</span>
</div>

<p>这个平台是个 Virtual Host ，没有 Root ，还是 FreeBSD 的系统，不是 Linux ，不太好用。但是优点是隔离性差， Memory 和 vCPU 能短时间内超过 100% 进行调用。</p>
<p>已经玩了不少时间了，起初看到 Github 上有使用 Serv00 搭建 Vless 节点的仓库，就上手玩了一下，后来发现极其不稳， screen 运行的进程总是过一段时间就掉了（后经网友讨论确认为Serv00有时候会重启宿主机），又得ssh上去启动，相当不友好，且后来又发现了 Hax 这样的玩具，就对 Serv00 视如敝履了。</p>
<p>但是这两天有群友突然提醒我才想起，我在 Hax 上用的很舒服的 pm2 也可以在 Serv00 上使用，这个十年有效期的玩具突然显得有用了起来。</p>
<p>经过我的尝试，成功在 Serv00 上部署了一些服务，接下来进行记录：</p>
<h2 id="面板自带功能">面板自带功能</h2>
<h3 id="域名">域名</h3>
<p>Serv00 上如果想要使用自己的域名，有两种方式，一种是通过 Cloudflare 提供的 Argo 隧道，不仅能绑域名，免配置 ssl ，还可以享受 Cloudflare 的免费 CDN 提速。第二种就是直接使用面板内自带的 DNS 服务器功能绑定自己的域名。</p>
<p>在 Panel 中进入 DNS zones 选项卡，使用 Add new zone 功能添加自己的域名或者自己的域名的子域，然后在 Zone list 中找到刚刚添加的域名，点击 Edit 查看 DNS 记录，把当中列出的全部记录添加到自己的域名的 DNS 记录中即可完成域名的绑定。</p>
<p>Serv00 本身对于绑定在其上的域名提供了许多的服务支持，这里所说的绑定在Serv00上的域名包括自己绑定的自己的域名，以及 Serv00 在注册账户时赠送的域名 USERNAME.serv00.net ，其服务包括免费的一键申请式的 SSL 证书、域名邮箱、 DNS 管理等多种功能。</p>
<h3 id="ssl证书申请">SSL证书申请</h3>
<p>在 Panel 中进入 WWW websites 选项卡，点击 Manage SSL certificates ，在你需要申请 SSL 证书的域名的 A 记录指向的那个 IP 地址右侧点击 Manage ，再点击 Add certificate ， Type 选择 Generate Let’s Encrypt certificate ，Domain 选择要申请 SSL 证书的域名，再点击 Add 即可。</p>
<h3 id="域名邮箱">域名邮箱</h3>
<p>Panel 中进入 E-mail 选项卡，注册账号后会自动注册一个域名邮箱，用户名是 USERNAMEUSERNAME.serv00.net 是 Serv00 的账户密码。可以使用 Add new e-mail 功能新建邮箱账户。</p>
<p>也可以在 Add new alias 功能中新建别名邮箱，其别名邮箱功能也提供了和 Cloudflare 一样的 Catch-all 的 Advanced settings 选项，用来批量注册东西十分方便。</p>
<p>目前我的测试中，似乎没有在 Manage whitelist 中添加进白名单的域名邮箱发来的邮件全部都会被识别为垃圾邮件。所以有需要的话可以在 Manage whitlist 中添加你需要接受邮件的邮箱的域名，比如 qq.com 、 gmail.com 等等。</p>
<p>如果绑定了自己的域名，想要使用自己的域名配置域名邮箱的话，要在 Domain list 中找到自己的域名，点击最右边的 DKIM ， action 选择 Add DNS record automatically ，然后 Sign domain 以注册域名，使得新的域名邮箱能够通过一些邮件接收服务器的验证。</p>
<p>Open web client 功能就可以进入邮箱的登录页面了，其使用方法与大多数的邮箱相同，不再赘述。</p>
<h3 id="dns管理">DNS管理</h3>
<p>DNS zones 选项卡中在自己绑定的域名右侧点击 Edit ，即可查看当前域名的所有 DNS 记录，在 Add new record 中可以手动添加新的 DNS 记录，与大多数的域名服务商提供的 DNS 管理的功能类似。</p>
<h3 id="proxy">Proxy</h3>
<p>WWW websites 选项卡中可以根据语言不同添加多种网站，其中 PHP 的 eval() function 和 exec() function 都要在添加完网站后，在Manage &gt; Details 中打开。不同类型的网页其 Details 中的选项也都有差异，可以按需查看配置，这里重点讲一下 Proxy 类型指向自己的应用程序监听端口的配置。</p>
<p>Add new website 功能中， Domain 填写自己的域名或者 serv00 分配的域名，或者它们的子域，展开 Advanced settings， Website type 选择 Proxy ，Proxy target 选择 localhost ， Proxy port 选择自己的应用监听的端口，其他选项留空或者保持默认，点击 Add 即可。接下来就能使用刚刚填写的域名访问自己部署的对应端口的应用了。如果需要 https 访问，再按前文的步骤去申请 SSL 证书即可。</p>
<h2 id="运行自己的应用">运行自己的应用</h2>
<p>Additional services 选项卡中找到 Run your own applications 项目，将其设置为 Enabled 即可。如果不开启这一项，自己的用户目录下的所有文件都无法添加可执行权限。</p>
<h3 id="file-manager">File manager</h3>
<p>文件管理，有一定的在线编辑和预览的功能，兼具文件的上传下载，删除新建等各种管理功能，十分便利。</p>
<h3 id="port-reservation">Port reservation</h3>
<p>需要使用端口都得在这申请。</p>
<h3 id="数据库">数据库</h3>
<p>Serv00 提供了 MySQL 、 PostgreSQL 、 MongoDB 三种数据库，可以按需新建数据库、数据库用户。同时， Serv00 还提供了三种数据库的 webui ，十分便利。</p>
<p>需要注意的是，所有数据库在新建时，其用户名和数据库名都有一个 mxxx_ 的前缀，在使用时容易被忽视。</p>
<h3 id="cron-jobs">Cron jobs</h3>
<p>Cron jobs 选项卡提供了一些计划性任务的设置功能，在这里可以设置开机自启任务，或者定时循环任务，当然常用的还是开机自启任务的设定， Specify time 选择 After reboot 即为开机自启。</p>
<h2 id="部署应用前的一些准备工作">部署应用前的一些准备工作</h2>
<p>在部署自己的应用之前，我建议提前安装好 pm2 以及 Cloudflared （可选）。前者是进程管理工具，用来方便开机自启，以及程序崩溃后自启，查阅进程运行情况等等。后者是 Cloudflare 的 Argo 隧道客户端，用它也可以给自己部署的应用加域名。特别是 Uptime Kuma ，更加推荐使用 Cloudflared 加域名，而不建议使用面板自带的 Proxy 。</p>
<h3 id="pm2">Pm2</h3>
<p>这个是重中之重，如果不是成功安装了 pm2 ，我甚至不会尝试探索 Serv00 这个玩具有什么用，所以 pm2 的安装方法记录在开头。</p>
<p>在 SSH 连接 serv00 之后，直接使用一键脚本安装 pm2 ：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">bash &lt;<span class="o">(</span>curl -s https://raw.githubusercontent.com/k0baya/alist_repl/main/serv00/install-pm2.sh<span class="o">)</span>
</span></span></code></pre></div><p>如果安装完成后执行 pm2 提示命令未找到，你可以断开 SSH 连接，再重新连接，即可。</p>
<h3 id="cloudflared">Cloudflared</h3>
<p>Cloudflared 官方仓库并没有构建 FreeBSD 系统上能够使用的二进制文件，但是同样的，我找到了第三方的构筑。使用第三方构筑的二进制文件，就能愉快的使用隧道了。</p>
<p>关于 Cloudflared 是什么，有什么用，ARGO_TOKEN 如何获取等部分，这里不再赘述，详细可以查看我的关于 CodeSandbox 和 Hax 的文章。</p>
<p>创建并进入Cloudflared 的工作目录：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir -p ~/domains/cloudflared <span class="o">&amp;&amp;</span> <span class="nb">cd</span> ~/domains/cloudflared
</span></span></code></pre></div><p>下载 Cloudflared：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wget https://cloudflared.bowring.uk/binaries/cloudflared-freebsd-latest.7z <span class="o">&amp;&amp;</span> 7z x cloudflared-freebsd-latest.7z <span class="o">&amp;&amp;</span> rm cloudflared-freebsd-latest.7z <span class="o">&amp;&amp;</span> mv -f ./temp/* ./cloudflared <span class="o">&amp;&amp;</span> rm -rf temp
</span></span></code></pre></div><p>测试运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">./cloudflared tunnel --edge-ip-version auto --protocol http2 --heartbeat-interval 10s run --token ARGO_TOKEN
</span></span></code></pre></div><p>其中 ARGO_TOKEN 要替换成自己的。确定运行没有问题后，按 Ctrl+c即可停止运行。</p>
<p>使用 pm2 启动 Cloudflared：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pm2 start ./cloudflared -- tunnel --edge-ip-version auto --protocol http2 --heartbeat-interval 10s run --token ARGO_TOKEN
</span></span></code></pre></div><p>其中 ARGO_TOKEN 要替换成自己的。</p>
<p>接着去 CLoudflare 的面板中设置域名对应端口，即可使用域名访问自己搭建的服务了。</p>
<h3 id="安装-go122">安装 go1.22</h3>
<p>如果你有安装自己使用 go build 构建的需求，你可以选择安装最新的 go1.22 ，这里记录其安装过程。</p>
<p>由于 Serv00 服务器上并未提供 go1.22 ，只提供了 go1.20.3 ，无法正常进行构建工作，所以需要手动安装 go1.22 环境。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 创建安装目录</span>
</span></span><span class="line"><span class="cl">mkdir -p ~/local/soft <span class="o">&amp;&amp;</span> <span class="nb">cd</span> ~/local/soft
</span></span><span class="line"><span class="cl"><span class="c1"># 下载编译好的 go1.22 的程序包</span>
</span></span><span class="line"><span class="cl">wget https://dl.google.com/go/go1.22.0.freebsd-amd64.tar.gz
</span></span><span class="line"><span class="cl"><span class="c1"># 解压</span>
</span></span><span class="line"><span class="cl">tar -xzvf go1.22.0.freebsd-amd64.tar.gz
</span></span><span class="line"><span class="cl"><span class="c1"># 删除压缩文件</span>
</span></span><span class="line"><span class="cl">rm go1.22.0.freebsd-amd64.tar.gz
</span></span><span class="line"><span class="cl"><span class="c1"># 修改 .profile 文件</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;export PATH=$PATH:~/local/soft/go/bin&#39;</span> &gt;&gt; ~/.profile
</span></span><span class="line"><span class="cl"><span class="c1"># 使 .profile 的修改生效</span>
</span></span><span class="line"><span class="cl"><span class="nb">source</span> ~/.profile
</span></span><span class="line"><span class="cl"><span class="c1"># 检查 go 版本</span>
</span></span><span class="line"><span class="cl">go version
</span></span></code></pre></div><h2 id="部署自己的应用">部署自己的应用</h2>
<p>关于设定 PHP 版本、插件、参数等配置均可参考文档的 .htaccess 部分进行配置，由于 PHP 的应用部署实在是太简单，故本文不会过多介绍。</p>
<h3 id="wordpress">WordPress</h3>
<p>实际上在 serv00 的文档中有搭建网站的示例，没错，示例就有 WordPress ，实际上 WordPress 确实可以搭建，十分简单好用。这里不做过多介绍，按照文档一步步操作即可。</p>
<p>除了 WordPress 外，文档中还详细介绍了 Redis、Memcached、Imapsync、WP-CLI、Tomcat 等服务的搭建方法，有需求的都可以照着抄。</p>
<h3 id="kodbox">KodBox</h3>
<p>虽然 Serv00 能够部署 KodBox，但是实在是不太好用。最直观的感受就是卡，因为 KodBox 运行期间需要调用多个 PHP 组件，而 Serv00 限制同时处理三个 PHP 进程，所以显得特别慢。其次， Serv00 没有 Root 权限，部分 PHP 插件没有安装，也无法安装，导致有一些 KodBox 的插件无法正常运行。</p>
<p>当然如果只是图新奇搭一个玩玩，也是可以的。下面是步骤：</p>
<p>首先在 Panel 中 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的USERNAME.serv00.net删掉后重新添加）
Website Type	PHP
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
接着SSH登入，并进入刚刚你新建的域名目录下的 public_html 路径下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 安装KodBox</span>
</span></span><span class="line"><span class="cl">bash &lt;<span class="o">(</span>curl -s https://pan.rappit.site/d/shell/kodbox1.49/serv00-kodbox-install.sh<span class="o">)</span>
</span></span></code></pre></div><p>然后去 Panel 中的 MySQL 选项卡，新建数据库和用户，用以接入 KodBox 。再去 WWW Websites 选项卡中找到 用户名.serv00.net ，点击右侧的 Manage &gt; Details 进入设置，把 GZIP compression、Allow PHP eval() function、Allow PHP exec() function 三个功能打开。</p>
<p>然后使用浏览器访问你的 KodBxo 的域名，进行安装配置即可。初次启动需要较长的时间，请耐心等待。</p>
<h3 id="lsky-pro">Lsky-Pro</h3>
<p>一开始看兰空图床的文档没看到 webdav 功能的相关介绍，只看到几个我都不用的存储介质，遂不感兴趣的搁置了，然而群友近日又提起，我打开 GitHub 才发现首页有个 Commit 的标题就是 webdav 相关，即兰空图床支持 webdav 。于是我便部署了一下，体验感觉还不错，简单易用。</p>
<p>本来无意在本篇文章再多写 PHP 相关的站点部署，因为过于简单。但是奈何群友有需求，遂做个简单的步骤记录：</p>
<p>首先在 Panel 中 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的USERNAME.serv00.net删掉后重新添加）
Website Type	PHP
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
接着SSH登入，并进入刚刚你新建的域名目录下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 下载图床应用</span>
</span></span><span class="line"><span class="cl"><span class="nv">release_info</span><span class="o">=</span><span class="k">$(</span>curl -s https://api.github.com/repos/lsky-org/lsky-pro/releases/latest<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">asset_url</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$release_info</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.assets[] | select(.name != &#34;source code&#34;) | .browser_download_url&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">curl -L -o temp.zip <span class="s2">&#34;</span><span class="nv">$asset_url</span><span class="s2">&#34;</span> <span class="o">&amp;&amp;</span> unzip -q temp.zip <span class="o">&amp;&amp;</span> rm -f temp.zip
</span></span><span class="line"><span class="cl">rm -rf public_html <span class="o">&amp;&amp;</span> ln -s <span class="s2">&#34;</span><span class="nv">$PWD</span><span class="s2">/public&#34;</span> <span class="s2">&#34;</span><span class="nv">$PWD</span><span class="s2">/public_html&#34;</span>
</span></span></code></pre></div><p>接着在 Panel 中 WWW websites 选项卡内，点击自己刚刚创建的用于部署 Lsky-Pro 的域名的 Manage &gt; Details ，在 Open Basedir directories 的最末添加：</p>
<p>:/usr/home/用户名/domains/xxx.USERNAME.serv00.net
记得把用户名和最末的域名换成自己的。</p>
<p>然后把 GZIP compression 、Allow PHP eval() function 、Allow PHP exec() function 都打开，点击 save changes 保存。</p>
<p>然后去 Panel 中的 MySQL 选项卡，新建数据库和用户，用以接入 Lsky-Pro 。</p>
<p>然后使用浏览器访问你的 Lsky-Pro 的域名，进行安装配置即可。</p>
<p>上面的应用不需要占用端口。</p>
<p>下面的应用每一个都能够 / 需要占用端口。</p>
<h3 id="vless">Vless</h3>
<p>这个肯定是第一时间部署的，每次遇到这样的平台，第一时间总是想着能不能搭建节点。</p>
<p>①
首先在 Panel 中放行一个端口，接着按照下表 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的 USERNAME.serv00.net 删掉后重新添加）
Website Type	proxy
Proxy Target	localhost
Proxy URL	留空
Proxy port	你准备用来部署 Vless 的端口
Use HTPPS	False
DNS support	True
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
接着SSH登入，并进入刚刚你新建的域名目录下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 克隆源仓库</span>
</span></span><span class="line"><span class="cl">rm -rf public_html <span class="o">&amp;&amp;</span> git clone https://github.com/qwer-search/serv00-vless public_html <span class="o">&amp;&amp;</span> <span class="nb">cd</span> public_html <span class="o">&amp;&amp;</span> rm -f README.md
</span></span></code></pre></div><p>使用vim编辑或者直接去 Panel 中的 File Manager 选项卡在线编辑 app.js 文件，修改端口为刚刚放行的端口。</p>
<p>安装依赖：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm install
</span></span></code></pre></div><p>安装完毕后，使用pm2启动并守护vless进程：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pm2 start app.js --name vless
</span></span></code></pre></div><p>接着去你的代理客户端软件中手动添加 vless 配置即可：</p>
<p>Key	Value
地址	Panel中WWW Websites 选项卡里的你的 Domain name
端口	你放行的端口
用户 id	37a0bd7c-8b9f-4693-8916-bd1e2da0a817
传输协议	ws
伪装域名	同地址
ws path	/
上表没有给出的可以不填。</p>
<p>②
首先在 Panel 中放行一个端口，接着按照下表 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的 USERNAME.serv00.net 删掉后重新添加）
Website Type	proxy
Proxy Target	localhost
Proxy URL	留空
Proxy port	你准备用来部署 Vless 的端口
Use HTPPS	False
DNS support	True
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
接着SSH登入，并进入刚刚你新建的域名目录下的 public_html 路径下，再使用 npm 命令安装 3Kmfi6HP/nodejs-proxy ：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm install 3Kmfi6HP/nodejs-proxy
</span></span></code></pre></div><p>再使用 pm2 启动：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 记得把 PORT 替换成自己放行的端口。</span>
</span></span><span class="line"><span class="cl">pm2 start npx --name vless -- nodejs-proxy -p PORT
</span></span></code></pre></div><p>接着访问这个刚刚添加的站点，即可在网页上直接获取配置。
哦对，有个小 bug ，端口需要改成 443 ，而网页中默认给的配置是 80 。</p>
<p>之所以说这个 npm 包不安全，是因为其配置在网页上都可以看到，而且网页设计不太合理，有一个不带 uuid 的中转页面，所以可以使用 fofa 、 shodan 等网络空间扫描工具批量扫出来，而且不止 Serv00 一个平台有人使用，如果你感兴趣，你可以去搜搜看，可以收获一大批 Vless 节点。</p>
<p>这里放一个 Serv00 上的，我在 fofa 上搜到的页面作为部署示例：https://pclwgdwv.serv00.net/</p>
<h3 id="alist">Alist</h3>
<p>Alist 官方仓库没有构筑 FreeBSD 系统下能够运行的 Alist 可执行文件，但是我在 Github 上发现了一个使用 Github Workflow 自动构筑 FreeBSD 适用的 Alist 的仓库，使用这个仓库就可以很便利的在Serv00上部署 Alist。</p>
<p>首先在 Panel 中放行一个端口，接着按照下表 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的 USERNAME.serv00.net 删掉后重新添加）
Website Type	proxy
Proxy Target	localhost
Proxy URL	留空
Proxy port	你准备用来部署 Alist 的端口
Use HTPPS	False
DNS support	True
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
接着 SSH 登入，并进入刚刚你新建的域名目录下的 public_html 路径下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 使用一键命令安装 Alist</span>
</span></span><span class="line"><span class="cl">wget -O alist-freebsd.sh https://raw.githubusercontent.com/k0baya/alist_repl/main/serv00/alist-freebsd.sh <span class="o">&amp;&amp;</span> sh alist-freebsd.sh
</span></span></code></pre></div><p>在 Panel 中进入 MySQL 选项卡，使用 Add database 功能新建一个数据库。</p>
<p>密码要求含有大写字母、小写字母和数字三种字符，且长度必须超过6个字符。</p>
<p>接下来进入 File manager 选项卡，进入 ~/domains/xxx.USERNAME.serv00.net/public_html/data 路径，可以看到一个名为 config.json 的文件，右键点击，选择 View/Edit &gt; Source Editor ，进行编辑：</p>
<p>我主要修改了 CDN、database、scheme 三个部分，其中CDN可以在 Alist 的官方文档找到，请选择你本地网络连接速度最快的一个。</p>
<p>scheme 部分，我选择修改 adress 为 127.0.0.1本地回环，是为了避免被他人使用 http://ip:port的方式进行访问。至于自己怎么访问，我在本文后面的部分会进行介绍。port 要改成自己前面放行的端口。</p>
<p>database 部分，type 需要改成 mysql ，host 填写你在注册邮件中看到的 mysql 的地址， port 是默认的 3306，用户名、密码、数据库名则按照你创建的情况进行填写。</p>
<p>最新版本的 Alist 如果不想开启 S3 Server，请把对应的配置文件中的端口配置为 0 。</p>
<p>改完之后，点击 save 保存，接着回到 SSH 窗口中进行操作：</p>
<p>测试启动 Alist：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">./alist server
</span></span></code></pre></div><p>确定运行没有问题后，按 Ctrl+c即可停止运行。</p>
<p>使用 pm2 启动并管理 alist：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pm2 start ./alist -- server
</span></span></code></pre></div><p>同样的，你还可以使用 Cloudflared 隧道添加域名，而不选择使用 Proxy 。</p>
<h3 id="synctv">Synctv</h3>
<p>群友仿照 alist-freebsd 的仓库的 workflow 进行构筑的。部署简单，与 alist 类似。首先在 Panel 中放行一个端口，接着按照下表 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的 USERNAME.serv00.net 删掉后重新添加）
Website Type	proxy
Proxy Target	localhost
Proxy URL	留空
Proxy port	你准备用来部署 Synctv 的端口
Use HTPPS	False
DNS support	True
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
接着 SSH 登入，并进入刚刚你新建的域名目录下的 public_html 路径下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 下载可执行文件</span>
</span></span><span class="line"><span class="cl"><span class="nv">release_info</span><span class="o">=</span><span class="k">$(</span>curl -s https://api.github.com/repos/shangskr/synctv-freebsd/releases/latest<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">asset_url</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$release_info</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.assets[] | select(.name != &#34;source code&#34;) | .browser_download_url&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">curl -L -o synctv <span class="s2">&#34;</span><span class="nv">$asset_url</span><span class="s2">&#34;</span> <span class="o">&amp;&amp;</span> chmod +x synctv
</span></span></code></pre></div><p>新建启动脚本：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cat &gt; start.sh <span class="s">&lt;&lt; EOF
</span></span></span><span class="line"><span class="cl"><span class="s">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="s"># 如果不希望被使用 http://ip:port 的方式访问，取消注释下一行
</span></span></span><span class="line"><span class="cl"><span class="s"># export SYNCTV_SERVER_LISTEN=127.0.0.1
</span></span></span><span class="line"><span class="cl"><span class="s"># 把下一行的最末的PORT改成自己放行的端口
</span></span></span><span class="line"><span class="cl"><span class="s">export SYNCTV_SERVER_PORT=PORT
</span></span></span><span class="line"><span class="cl"><span class="s">exec ./synctv server --data-dir ./
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span></code></pre></div><p>添加可执行权限：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod +x start.sh
</span></span></code></pre></div><p>测试运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">./start.sh
</span></span></code></pre></div><p>确定运行没有问题后，按 Ctrl+c即可停止运行。</p>
<p>使用pm2启动并管理：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pm2 start ./start.sh --name synctv
</span></span></code></pre></div><p>同样的，你还可以使用 Cloudflared 隧道添加域名，而不选择使用 Proxy 。</p>
<h3 id="one-api">One-api</h3>
<p>源仓库没有提供freebsd平台的二进制文件，需要自己构建，但是很简单。我已经写了一个仓库用于自动化构建 freebsd 版本的 one-api 二进制文件，可以直接下载使用。</p>
<p>如果你想使用 New-API ，可以使用这个仓库k0baya/new-api-freebsd，用法与本节介绍的 One-API 基本一致，对比One-API添加了一些更方便的功能。也许之后 One-API 也会加入这些功能。</p>
<p>首先在 Panel 中放行一个端口，接着按照下表 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的USERNAME.serv00.net删掉后重新添加）
Website Type	proxy
Proxy Target	localhost
Proxy URL	留空
Proxy port	你准备用来部署 One-API 的端口
Use HTPPS	False
DNS support	True
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
接着 SSH 登入，并进入刚刚你新建的域名目录下的 public_html 路径下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 下载 one-api</span>
</span></span><span class="line"><span class="cl"><span class="nv">release_info</span><span class="o">=</span><span class="k">$(</span>curl -s https://api.github.com/repos/k0baya/one-api-freebsd/releases/latest<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">asset_url</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$release_info</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.assets[] | select(.name != &#34;source code&#34;) | .browser_download_url&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">curl -L -o one-api <span class="s2">&#34;</span><span class="nv">$asset_url</span><span class="s2">&#34;</span> <span class="o">&amp;&amp;</span> chmod +x one-api
</span></span></code></pre></div><p>新建启动脚本：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cat &gt; start.sh <span class="s">&lt;&lt; EOF
</span></span></span><span class="line"><span class="cl"><span class="s">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s"># 如果你有设置主题的需要，可以取消注释下一行，然后按照自己的需求设置。
</span></span></span><span class="line"><span class="cl"><span class="s"># export THEME=&#34;berry&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">export TIKTOKEN_CACHE_DIR=&#34;$PWD&#34;
</span></span></span><span class="line"><span class="cl"><span class="s"># 把下一行的 PORT 改为自己放行的端口
</span></span></span><span class="line"><span class="cl"><span class="s">exec ./one-api --port PORT --log-dir ./logs
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span></code></pre></div><p>添加可执行权限：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod +x start.sh
</span></span></code></pre></div><p>保存后回到 terminal 中，测试运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">./start.sh
</span></span></code></pre></div><p>确定运行没有问题后，按 Ctrl+c即可停止运行。</p>
<p>使用pm2启动并管理：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pm2 start ./start.sh --name one-api
</span></span></code></pre></div><p>同样的，你还可以使用 Cloudflared 隧道添加域名，而不选择使用 Proxy 。</p>
<h3 id="uptime-kuma">Uptime-Kuma</h3>
<p>受限于 FreeBSD 的平台限制，1.23版本内置了 PlayWright ，无法运行，所以只能安装 1.22 版本。切记先去 Panel 中放行 TCP 端口。</p>
<p>首先在 Panel 中放行一个端口，接着按照下表 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的USERNAME.serv00.net删掉后重新添加）
Website Type	proxy
Proxy Target	localhost
Proxy URL	留空
Proxy port	你准备用来部署 Uptime-Kuma 的端口
Use HTPPS	False
DNS support	True
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
接着 SSH 登入，并进入刚刚你新建的域名目录下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 下载 v1.22.1 版本的源代码</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ~/domains <span class="o">&amp;&amp;</span> wget https://github.com/louislam/uptime-kuma/archive/refs/tags/1.22.1.zip <span class="o">&amp;&amp;</span> unzip 1.22.1.zip <span class="o">&amp;&amp;</span> rm -rf public_html <span class="o">&amp;&amp;</span> mv -f uptime-kuma-1.22.1 public_html <span class="o">&amp;&amp;</span> rm -f 1.22.1.zip <span class="o">&amp;&amp;</span> <span class="nb">cd</span> public_html
</span></span></code></pre></div><p>设置生产模式：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm ci --production
</span></span></code></pre></div><p>下载dist文件：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wget https://github.com/louislam/uptime-kuma/releases/download/1.22.1/dist.tar.gz <span class="o">&amp;&amp;</span> tar -xzvf dist.tar.gz <span class="o">&amp;&amp;</span> rm dist.tar.gz
</span></span></code></pre></div><p>安装补充依赖：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm install
</span></span></code></pre></div><p>安装过程中多少会有报错，无视就好，实际上最后可以正常运行。内置的Cloudflared反向代理在FreeBSD平台上无法使用，但是可以使用上述的外置的Cloudflared进行反代，使用自己的域名。</p>
<p>测试运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">node server/server.js --port<span class="o">=</span>PORT
</span></span></code></pre></div><p>记得把PORT替换成你放行的端口。确定运行没有问题后，按 Ctrl+c即可停止运行。</p>
<p>使用pm2管理后台运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pm2 start server/server.js --name uptime-kuma -- --port<span class="o">=</span>PORT
</span></span></code></pre></div><p>记得把PORT替换成你放行的端口。</p>
<p>如果你不希望自己的Uptime-Kuma被人使用 http://IP:PORT的方式访问，你可以在最后的执行命令添加 &ndash;host=127.0.0.1的尾缀，这样就只能通过反向代理的域名进行访问了:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pm2 start server/server.js --name uptime-kuma -- --port<span class="o">=</span>PORT --host<span class="o">=</span>127.0.0.1
</span></span></code></pre></div><p>同样的，你还可以使用 Cloudflared 隧道添加域名，而不选择使用 Proxy 。</p>
<h3 id="bingo暂时无法正常使用">Bingo（暂时无法正常使用）</h3>
<p>先放行一个端口。在 Panel 中进入 File manager 选项卡，点击左侧的 My Files 进入你的用户根目录，找到 .profile文件，右键选择 View/Edit &gt; Choose other &gt;Source Editor 进行编辑，在最末加上以上两行并保存：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">node</span><span class="o">=</span><span class="s1">&#39;node20&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">npm</span><span class="o">=</span><span class="s1">&#39;npm20&#39;</span>
</span></span></code></pre></div><p>应用更改：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">source</span> ~/.profile
</span></span></code></pre></div><p>先新建一个目录用于存放 Bingo 的相关文件，进入目录后执行下述操作。</p>
<p>下载源码：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git clone https://github.com/weaigc/bingo
</span></span></code></pre></div><p>进入源码所在目录：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> bingo
</span></span></code></pre></div><p>安装依赖：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm20 install
</span></span></code></pre></div><p>下载build好的 .next资源：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wget -O next.tar.gz https://pan.saika.free.hr/d/local/next.tar.gz <span class="o">&amp;&amp;</span> tar -xzvf next.tar.gz <span class="o">&amp;&amp;</span> rm next.tar.gz
</span></span></code></pre></div><p>添加环境变量文件：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cp .env.example .env
</span></span></code></pre></div><p>接着在 Panel 中进入 File manager 选项卡，进入Bingo 源码所在的目录，找到 server.js文件，右键选择 View/Edit &gt; Choose other &gt;Source Editor 进行编辑，修改第7行中的端口为你放行的端口。再编辑 .env文件，添加你的 BING_HEADER。</p>
<p>测试启动：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">npm20 run start
</span></span></code></pre></div><p>确定运行没有问题后，按 Ctrl+c即可停止运行。</p>
<p>使用pm2启动并管理：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">pm2 start npm --name bingo -- run start
</span></span></code></pre></div><h3 id="refresh-gpt-chat">Refresh-gpt-chat</h3>
<p>用来对接 ninja、warpgpt 等能够使用 access_Token 作为 API Key 请求 GPT 的工具，以使用永久有效期的 Refresh_token 来获取更好的体验。</p>
<p>首先在 Panel 中放行一个端口，接着按照下表 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的 USERNAME.serv00.net 删掉后重新添加）
Website Type	proxy
Proxy Target	localhost
Proxy URL	留空
Proxy port	你准备用来部署 Refresh-gpt-chat 的端口
Use HTPPS	False
DNS support	True
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
接着 SSH 登入，并进入刚刚你新建的域名目录下的 public_html 路径下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 下载 refresh-gpt-chat</span>
</span></span><span class="line"><span class="cl">wget -O refresh-gpt-chat.jar https://github.com/Yanyutin753/refresh-gpt-chat/releases/download/v0.0.3/refresh-gpt-chat-0.0.3-SNAPSHOT.jar
</span></span></code></pre></div><p>使用 pm2 启动：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pm2 start java19 --name refresh-gpt-chat -- -jar refresh-gpt-chat.jar --server.port<span class="o">=</span>端口 --server.servlet.context-path<span class="o">=</span>/ --getAccessTokenUrl<span class="o">=</span>https://你的ninja地址/auth/refresh_token --chatUrl<span class="o">=</span>https://你的ninja地址/v1/chat/completions
</span></span></code></pre></div><p>再套域名，接下来就可以直接使用 https://你套的域名/v1/chat/completions/ 当作API端点，使用 refresh_token 做 API_Keys ，使用 ChatGPT 了。</p>
<p>然后在 one-api 中添加自定义渠道， Base URL 填写你 https://你套的域名，模型填入你的 refresh_token 对应的账号所支持的模型，如果和我一样手持大把 3.5 的账号想用来做 API 用，可以选择全部 GPT3.5 的相关模型，然后在 模型重定向中填入以下内容：</p>
<pre tabindex="0"><code>JSON
{
  &#34;gpt-3.5-turbo-0301&#34;: &#34;gpt-3.5-turbo&#34;,
  &#34;gpt-3.5-turbo-0613&#34;: &#34;gpt-3.5-turbo&#34;,
  &#34;gpt-3.5-turbo-16k&#34;: &#34;gpt-3.5-turbo&#34;,
  &#34;gpt-3.5-turbo-16k-0613&#34;: &#34;gpt-3.5-turbo&#34;,
  &#34;gpt-3.5-turbo-1106&#34;: &#34;gpt-3.5-turbo&#34;,
  &#34;gpt-3.5-turbo-instruct&#34;: &#34;gpt-3.5-turbo&#34;
}
</code></pre><p>密钥填写你的 refresh_token即可，如果你有多个账号，可以将批量勾选上，然后一行写一个 refresh_token。</p>
<p>同样的，你还可以使用 Cloudflared 隧道添加域名，而不选择使用 Proxy 。</p>
<h3 id="gpt4-copilot-java">Gpt4-copilot-java</h3>
<p>支持 cocopilot 的 ccu 和 copilot 的 ghu 调用 copilot 转 GPT-4 的接口转换工具。 Java 写的，可以在 Serv00 运行。</p>
<p>目前更推荐这个方法：lvguanjun/copilot-to-chatgpt4
比起 Gpt4-copilot-java 更轻量更强大。</p>
<p>首先在 Panel 中放行一个端口，接着按照下表 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的USERNAME.serv00.net删掉后重新添加）
Website Type	proxy
Proxy Target	localhost
Proxy URL	留空
Proxy port	你准备用来部署 Gpt4-copilot-java 的端口
Use HTPPS	False
DNS support	True
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
接着 SSH 登入，并进入刚刚你新建的域名目录下的 public_html 路径下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 下载 fat jar 包</span>
</span></span><span class="line"><span class="cl"><span class="nv">RELEASE_INFO</span><span class="o">=</span><span class="k">$(</span>curl -s <span class="s2">&#34;https://api.github.com/repos/Yanyutin753/gpt4-copilot-java-sh/releases/latest&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">JAR_DOWNLOAD_URL</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$RELEASE_INFO</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.assets[] | select(.name|test(&#34;.jar$&#34;)) | .browser_download_url&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">curl -L -o gpt4-copilot-java.jar <span class="s2">&#34;</span><span class="nv">$JAR_DOWNLOAD_URL</span><span class="s2">&#34;</span>
</span></span></code></pre></div><p>测试运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 把PORT改为自己放行的端口，最后的server.servlet.context-path参数可以改成自己喜欢的尾缀</span>
</span></span><span class="line"><span class="cl">java19 -jar gpt4-copilot-java.jar --server.port<span class="o">=</span>PORT --server.servlet.context-path<span class="o">=</span>/
</span></span></code></pre></div><p>测试没有问题之后，按 Ctrl+c即可停止运行。</p>
<p>使用 pm2 启动并管理：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pm2 start java19 --name gpt4-copilot-java -- -jar gpt4-copilot-java.jar --server.port<span class="o">=</span>PORT --server.servlet.context-path<span class="o">=</span>/
</span></span></code></pre></div><p>始皇的公车：ghu_ThisIsARealFreeCopilotKeyByCoCopilot （已失效）</p>
<p>免费公车白嫖请求示例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">curl --location <span class="s1">&#39;http(s)://ip:port_or_URL/cocopilot/v1/chat/completions&#39;</span> 
</span></span><span class="line"><span class="cl">--header <span class="s1">&#39;Content-Type: application/json&#39;</span> 
</span></span><span class="line"><span class="cl">--header <span class="s1">&#39;Authorization: Bearer ghu_ThisIsARealFreeCopilotKeyByCoCopilot&#39;</span> 
</span></span><span class="line"><span class="cl">--data <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">&#34;model&#34;: &#34;gpt-4&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">&#34;messages&#34;: [{&#34;role&#34;: &#34;user&#34;, &#34;content&#34;: &#34;鲁迅打周树人&#34;}]
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span>
</span></span></code></pre></div><p>同样的，你还可以使用 Cloudflared 隧道添加域名，而不选择使用 Proxy 。</p>
<h3 id="zfile">Zfile</h3>
<p>首先在 Panel 中放行一个端口，接着按照下表 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的USERNAME.serv00.net删掉后重新添加）
Website Type	proxy
Proxy Target	localhost
Proxy URL	留空
Proxy port	你准备用来部署 Zfile 的端口
Use HTPPS	False
DNS support	True
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
接着 SSH 登入，并进入刚刚你新建的域名目录下的 public_html 路径下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 下载 fat jar 包</span>
</span></span><span class="line"><span class="cl">wget --no-check-certificate -O zfile.jar https://c.jun6.net/ZFILE/zfile-release.jar
</span></span></code></pre></div><p>测试运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">java19 -jar -Duser.timezone<span class="o">=</span>Asia/Shanghai zfile.jar --zfile.log.path<span class="o">=</span><span class="nv">$PWD</span>/logs --zfile.db.path<span class="o">=</span><span class="nv">$PWD</span>/zfile --server.port<span class="o">=</span>PORT
</span></span></code></pre></div><p>记得把端口改成自己的。测试没有问题之后，按 Ctrl+c即可停止运行。</p>
<p>使用pm2启动并管理：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pm2 start java19 --name zfile -- -jar -Duser.timezone<span class="o">=</span>Asia/Shanghai zfile.jar --zfile.log.path<span class="o">=</span><span class="nv">$PWD</span>/logs --zfile.db.path<span class="o">=</span><span class="nv">$PWD</span>/zfile --server.port<span class="o">=</span>PORT
</span></span></code></pre></div><p>同样的，你还可以使用 Cloudflared 隧道添加域名，而不选择使用 Proxy 。</p>
<h3 id="halo">Halo</h3>
<p>慎重部署，内存会超100%，不知道会不会封号</p>
<p>halo 自从升级 2.0 版本开始，很长时间内都没有提供构筑好的 jar 包，甚至于在GitHub上都出现了第三方的，使用 GitHub workflow 自动化构筑 jar 包的仓库。但是，自从2.12.0-alpha.1版本开始，halo 的官方仓库又开始提供构筑好的 jar 包了，刚好这些天在玩 Serv00 ，遂尝试部署了一下，成功。现记录一下：</p>
<p>首先在 Panel 中放行一个端口，接着按照下表 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的 USERNAME.serv00.net 删掉后重新添加）
Website Type	proxy
Proxy Target	localhost
Proxy URL	留空
Proxy port	你准备用来部署 Halo 的端口
Use HTPPS	False
DNS support	True
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
并在 MySQL 选项卡中中新建 MySQL 数据库，用于填入接入 Halo 。</p>
<p>接着 SSH 登入，并进入刚刚你新建的域名目录下的 public_html 路径下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 下载jar包</span>
</span></span><span class="line"><span class="cl"><span class="nv">release_info</span><span class="o">=</span><span class="k">$(</span>curl -s https://api.github.com/repos/halo-dev/halo/releases/latest<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">jar_url</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$release_info</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.assets[] | select(.name | endswith(&#34;.jar&#34;)) | .browser_download_url&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">curl -L <span class="s2">&#34;</span><span class="nv">$jar_url</span><span class="s2">&#34;</span> -o halo.jar
</span></span></code></pre></div><p>在 halo.jar 所在路径下新建 .halo2 文件夹，进入其中，新建文件 application.yaml 然后并配置其内容：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 新建文件夹</span>
</span></span><span class="line"><span class="cl">mkdir -p .halo2
</span></span><span class="line"><span class="cl"><span class="c1"># 新建并填入配置</span>
</span></span><span class="line"><span class="cl">cat &gt; .halo2/application.yaml <span class="s">&lt;&lt; EOF
</span></span></span><span class="line"><span class="cl"><span class="s">server:
</span></span></span><span class="line"><span class="cl"><span class="s">  port: 你在面板中放行的端口
</span></span></span><span class="line"><span class="cl"><span class="s">  # Response data gzip.
</span></span></span><span class="line"><span class="cl"><span class="s">  compression:
</span></span></span><span class="line"><span class="cl"><span class="s">    enabled: false
</span></span></span><span class="line"><span class="cl"><span class="s">spring:
</span></span></span><span class="line"><span class="cl"><span class="s">  #sql:
</span></span></span><span class="line"><span class="cl"><span class="s">  #  init.platform: mysql
</span></span></span><span class="line"><span class="cl"><span class="s">  r2dbc:
</span></span></span><span class="line"><span class="cl"><span class="s">    url: r2dbc:pool:mysql://数据库地址:3306/数据库名
</span></span></span><span class="line"><span class="cl"><span class="s">    username: 数据库用户名
</span></span></span><span class="line"><span class="cl"><span class="s">    password: 数据库密码
</span></span></span><span class="line"><span class="cl"><span class="s">halo:
</span></span></span><span class="line"><span class="cl"><span class="s">  # Your admin client path is https://your-domain/{admin-path}
</span></span></span><span class="line"><span class="cl"><span class="s">  admin-path: admin
</span></span></span><span class="line"><span class="cl"><span class="s">  # memory or level
</span></span></span><span class="line"><span class="cl"><span class="s">  cache: level
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span></code></pre></div><p>在 halo.jar 所在路径下新建 run.sh 运行脚本：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cat &gt; run.sh <span class="s">&lt;&lt; EOF
</span></span></span><span class="line"><span class="cl"><span class="s">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="s">export HALO_WORK_DIR=&#34;$PWD/.halo2&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">export HALO_EXTERNAL_URL=&#34;https://你的域名&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">exec java17 -server -Xms128m -Xmx256m -jar -Duser.timezone=Asia/Shanghai $PWD/halo.jar --spring.config.additional-location=$PWD/.halo2/application.yaml
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span></code></pre></div><p>测试运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod +x run.sh <span class="o">&amp;&amp;</span> ./run.sh
</span></span></code></pre></div><p>确定运行没有问题后，按 Ctrl+c即可停止运行。</p>
<p>使用pm2管理运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod +x run.sh <span class="o">&amp;&amp;</span> pm2 start ./run.sh --name halo
</span></span></code></pre></div><p>同样的，你还可以使用 Cloudflared 隧道添加域名，而不选择使用 Proxy 。</p>
<h3 id="go-proxy-bingai">Go-proxy-bingai</h3>
<p>这个仓库是 Bingo 的前身，当初玩 Replit 时我便有在使用，只可惜作者早已弃坑，所以当初我才找到了当时还能用的 Bingo 使用。</p>
<p>在 Bingo 也长期未更新，无法正常使用的如今，我的目光转向了另一个二改仓库。Harry-zklcdc 维护的 Go-proxy-bingai 的分支仓库目前还能够正常使用。而且在与开发者反馈了几个 bug 之后，开发者都会花时间认真复现，并快速修复，其体验实在是不错。</p>
<p>虽然原仓库的 Release 中并未提供 FreeBSD 系统适用的二进制文件，但是我们能够自己构建。我已经构建了一份放在这篇博客底部的QQ群的群文件中。我写了一个仓库用于自动化构建 FreeBSD 版本的 go-proxy-bingai ，可以从我的仓库下载使用。 作者已经开始提供 FreeBSD 的构建，故我的仓库已经存档。</p>
<p>首先在 Panel 中放行一个端口，接着按照下表 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的 USERNAME.serv00.net 删掉后重新添加）
Website Type	proxy
Proxy Target	localhost
Proxy URL	留空
Proxy port	你准备用来部署 Go-proxy-bingai 的端口
Use HTPPS	False
DNS support	True
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
接着 SSH 登入，并进入刚刚你新建的域名目录下的 public_html 路径下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 下载可执行文件</span>
</span></span><span class="line"><span class="cl"><span class="nv">release_info</span><span class="o">=</span><span class="k">$(</span>curl -s https://api.github.com/repos/Harry-zklcdc/go-proxy-bingai/releases <span class="p">|</span> jq -r <span class="s1">&#39;[.[] | select(.prerelease==false)][0]&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">download_url</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$release_info</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.assets[] | select(.name==&#34;go-proxy-bingai-freebsd-amd64.tar.gz&#34;) | .browser_download_url&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">curl -L <span class="s2">&#34;</span><span class="nv">$download_url</span><span class="s2">&#34;</span> -o go-proxy-bingai-freebsd-amd64.tar.gz<span class="o">&amp;&amp;</span> tar -xzf go-proxy-bingai-freebsd-amd64.tar.gz <span class="o">&amp;&amp;</span> rm go-proxy-bingai-freebsd-amd64.tar.gz <span class="o">&amp;&amp;</span> chmod +x go-proxy-bingai
</span></span></code></pre></div><p>新建启动脚本：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cat &gt; entrypoint.sh <span class="s">&lt;&lt; EOF
</span></span></span><span class="line"><span class="cl"><span class="s">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="s"># 被注释的环境变量请根据自己的需求，按照原仓库的 wiki 中的介绍进行填入。
</span></span></span><span class="line"><span class="cl"><span class="s">export BYPASS_SERVER=&#34;https://bypass.zklcdc.xyz&#34;  # 作者本人的公共bypass服务，可用性未知。
</span></span></span><span class="line"><span class="cl"><span class="s"># export Go_Proxy_BingAI_USER_TOKEN_1=&#34;xxx&#34;
</span></span></span><span class="line"><span class="cl"><span class="s"># export Go_Proxy_BingAI_USER_TOKEN_2=&#34;xxx&#34;
</span></span></span><span class="line"><span class="cl"><span class="s"># export USER_KievRPSSecAuth=&#34;xxx&#34;
</span></span></span><span class="line"><span class="cl"><span class="s"># export USER_RwBf=&#34;xxx&#34;
</span></span></span><span class="line"><span class="cl"><span class="s"># export USER_MUID=&#34;xxx&#34;
</span></span></span><span class="line"><span class="cl"><span class="s"># export APIKEY=&#34;sk-xxx&#34;
</span></span></span><span class="line"><span class="cl"><span class="s"># export BING_BASE_URL=&#34;https://www.bing.com&#34;
</span></span></span><span class="line"><span class="cl"><span class="s"># export SYDNEY_BASE_URL=&#34;https://sydney.bing.com&#34;
</span></span></span><span class="line"><span class="cl"><span class="s"># export HTTP_PROXY=&#34;http://172.17.0.1:18080&#34;
</span></span></span><span class="line"><span class="cl"><span class="s"># export HTTPS_PROXY=&#34;http://172.17.0.1:18080&#34;
</span></span></span><span class="line"><span class="cl"><span class="s"># export Go_Proxy_BingAI_AUTH_KEY=&#34;xxx&#34;
</span></span></span><span class="line"><span class="cl"><span class="s"># 请把下一行双引号中的内容替换成你放行的端口。
</span></span></span><span class="line"><span class="cl"><span class="s">export PORT=&#34;xxx&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">chmod +x go-proxy-bingai &amp;&amp; exec ./go-proxy-bingai
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span></code></pre></div><p>运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 测试运行</span>
</span></span><span class="line"><span class="cl">chmod +x entrypoint.sh <span class="o">&amp;&amp;</span> ./entrypoint.sh
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 pm2 管理运行</span>
</span></span><span class="line"><span class="cl">pm2 start ./entrypoint.sh --name go-proxy-bingai
</span></span></code></pre></div><p>请注意，如果你需要使用其 web 功能，而不仅仅是 api 功能，请务必使用 https 访问，不然无法打开。你可以选择使用面板自带的 proxy 添加域名并申请 ssl 证书，亦或者直接使用 cloudflared 隧道。</p>
<p>同样的，你还可以使用 Cloudflared 隧道添加域名，而不选择使用 Proxy 。</p>
<h3 id="pentaract">Pentaract</h3>
<p>不建议使用，目前 Bug 众多，而且对 Telegram 账号有一定要求，目前暂不清楚 Telegram 限制账号的评定标准。</p>
<p>可以自行构建或者使用使用我构建的成品。由于该应用需要使用具有超级管理员权限的 PostgreSQL ，故不可使用 Serv00 自带的 PostgreSQL ，需要远程连接。</p>
<p>编译成品下载地址：pentaract-freebsd_X64.tar.gz</p>
<p>前端构建简单，这里不再赘述，而且由于其 Dockerfile 内构建前端使用的是 Node.js 21 而目前 FreeBSD Port 最高只有 Node.js 20 ，故不推荐在 FreeBSD 上直接构建，可以使用 GItHub Actions 进行构建，或是自己在 Node.js 21 的环境下构建再复制，甚至干脆直接从作者预构建的 Docker 镜像内打包出来使用。（经过测试，使用 Nodejs20 构建也可以正常使用。）</p>
<p>Serv00 上的构建法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 切换 Node.js 版本为 Nodejs20</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">node</span><span class="o">=</span>node20
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">npm</span><span class="o">=</span>npm20
</span></span><span class="line"><span class="cl"><span class="c1"># 全局安装 pnpm</span>
</span></span><span class="line"><span class="cl">npm install -g pnpm
</span></span><span class="line"><span class="cl"><span class="nb">source</span> ~/.bashrc
</span></span><span class="line"><span class="cl"><span class="c1"># 构建前端</span>
</span></span><span class="line"><span class="cl">pnpm install
</span></span><span class="line"><span class="cl"><span class="nv">VITE_API_BASE</span><span class="o">=</span><span class="s1">&#39;/api&#39;</span> pnpm run build
</span></span><span class="line"><span class="cl"><span class="c1"># 移动构建产物到工作目录</span>
</span></span><span class="line"><span class="cl">mkdir -p ~/pentaract/ui <span class="o">&amp;&amp;</span> cp -R ./dist/* ~/pentaract/ui
</span></span></code></pre></div><p>后端的构建，可以使用 GItHub Actions ，或者本地 FreeBSD 虚拟机，甚至直接在 Serv00 上构建。这里记录一下在 Serv00 上构建的方法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 克隆仓库到 Serv00 上</span>
</span></span><span class="line"><span class="cl">git clone https://github.com/Dominux/Pentaract <span class="o">&amp;&amp;</span> <span class="nb">cd</span> Pentaract/pentaract
</span></span><span class="line"><span class="cl"><span class="c1"># 构建</span>
</span></span><span class="line"><span class="cl"><span class="nv">LIBCLANG_PATH</span><span class="o">=</span>/usr/local/llvm16/lib cpuset -l <span class="m">0</span> cargo build --release
</span></span><span class="line"><span class="cl"><span class="c1"># 移动构建产物到工作目录</span>
</span></span><span class="line"><span class="cl">mkdir -p ~/pentaract <span class="o">&amp;&amp;</span> cp ./target/release/pentaract ~/pentaract/pentaract
</span></span></code></pre></div><p>然后去 supabase 注册一个免费的PostgreSQL ，记录下数据库的用户名、密码、数据库名、地址，用于后续填入环境变量。</p>
<p>接着在 ~/pentaract 路径下新建一个启动脚本，按照要求填入所有的环境变量：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cat &gt; start.sh <span class="s">&lt;&lt; EOF
</span></span></span><span class="line"><span class="cl"><span class="s">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="s">export PORT=xxxx
</span></span></span><span class="line"><span class="cl"><span class="s">export WORKERS=4
</span></span></span><span class="line"><span class="cl"><span class="s">export CHANNEL_CAPACITY=32
</span></span></span><span class="line"><span class="cl"><span class="s">export SUPERUSER_EMAIL=xxxxxxxx.com
</span></span></span><span class="line"><span class="cl"><span class="s">export SUPERUSER_PASS=xxxx
</span></span></span><span class="line"><span class="cl"><span class="s">export ACCESS_TOKEN_EXPIRE_IN_SECS=1800
</span></span></span><span class="line"><span class="cl"><span class="s">export REFRESH_TOKEN_EXPIRE_IN_DAYS=14
</span></span></span><span class="line"><span class="cl"><span class="s">export SECRET_KEY=xxx
</span></span></span><span class="line"><span class="cl"><span class="s">export TELEGRAM_API_BASE_URL=https://api.telegram.org
</span></span></span><span class="line"><span class="cl"><span class="s">export DATABASE_USER=xxxx
</span></span></span><span class="line"><span class="cl"><span class="s">export DATABASE_PASSWORD=xxxx
</span></span></span><span class="line"><span class="cl"><span class="s">export DATABASE_NAME=xxxx
</span></span></span><span class="line"><span class="cl"><span class="s">export DATABASE_HOST=xxxx
</span></span></span><span class="line"><span class="cl"><span class="s">export DATABASE_PORT=5432
</span></span></span><span class="line"><span class="cl"><span class="s">chmod +x pentaract &amp;&amp; exec ./pentaract
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span></code></pre></div><p>给启动脚本赋权：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod +x start.sh
</span></span></code></pre></div><p>前端的 index-22eec6d1.js 文件内的 http://localhost:8000 需要更改为 serv00 的 url 或者 ip:port 。你可以去文件管理中编辑，查找替换即可，也可以使用sed命令简单更改一下： 已经重新构建前端并替换，现无需此步。</p>
<p>测试运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">./start.sh
</span></span></code></pre></div><p>使用 pm2 管理：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">pm2 start ./start.sh --name pentaract
</span></span></code></pre></div><h3 id="onelist">OneList</h3>
<p>原作者似乎已经弃坑，故我的仓库没有做自动检测构建。但是体验还不错，有 Emby 既视感了，配合小雅的 Alist 岂不美哉。</p>
<p>首先在 Panel 中放行一个端口，接着按照下表 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的USERNAME.serv00.net删掉后重新添加）
Website Type	proxy
Proxy Target	localhost
Proxy URL	留空
Proxy port	你准备用来部署 OneList 的端口
Use HTPPS	False
DNS support	True
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
接着SSH登入，并进入刚刚你新建的域名目录下的 public_html 路径下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 下载 OneList</span>
</span></span><span class="line"><span class="cl">wget https://github.com/k0baya/onelist-freebsd/releases/download/v2.0.5/onelist
</span></span><span class="line"><span class="cl"><span class="c1"># 初始化配置</span>
</span></span><span class="line"><span class="cl">chmod +x onelist <span class="o">&amp;&amp;</span> ./onelist -run config
</span></span><span class="line"><span class="cl">接着回到 Panel 中，进入File manager选项卡，进入 OneList 所在路径，可以看到一个名为 config.env 的文件，右键点击，选择View/Edit &gt; Source Editor，进行编辑：
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 服务设置</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 注意要改为未被占用的端口</span>
</span></span><span class="line"><span class="cl"><span class="nv">API_PORT</span><span class="o">=</span><span class="m">5245</span>
</span></span><span class="line"><span class="cl"><span class="nv">FaviconicoUrl</span><span class="o">=</span>https://wework.qpic.cn/wwpic/818353_fizV30xbQCGPQRP_1677394564/0
</span></span><span class="line"><span class="cl"><span class="nv">API_SECRET</span><span class="o">=</span>fRVvjcNd11gYGI85StVaeCtPVSmJTRRE
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Env有两种模式，Debug及Release，主要用在数据库为mysql时候，需要注意修改Env环境和mysql密码对应</span>
</span></span><span class="line"><span class="cl"><span class="nv">Env</span><span class="o">=</span>Debug
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 管理员账户设置，用于初始化管理员账户</span>
</span></span><span class="line"><span class="cl"><span class="nv">UserEmail</span><span class="o">=</span>xxxx.qq.com
</span></span><span class="line"><span class="cl"><span class="nv">UserPassword</span><span class="o">=</span>xxxxx
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 数据库设置</span>
</span></span><span class="line"><span class="cl"><span class="nv">DB_DRIVER</span><span class="o">=</span>sqlite
</span></span><span class="line"><span class="cl"><span class="nv">DB_USER</span><span class="o">=</span>root
</span></span><span class="line"><span class="cl"><span class="nv">DbName</span><span class="o">=</span>onelist
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 如果上面DB_DRIVER类型为mysql，就需要正确填下以下参数</span>
</span></span><span class="line"><span class="cl"><span class="nv">DB_PASSWORD_Debug</span><span class="o">=</span><span class="m">123456</span>
</span></span><span class="line"><span class="cl"><span class="nv">DB_PASSWORD_Release</span><span class="o">=</span><span class="m">123456</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># TheMovieDb Key</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 在https://www.themoviedb.org网站申请</span>
</span></span><span class="line"><span class="cl"><span class="nv">KeyDb</span><span class="o">=</span>22f10ca52f109158ac7fe064ebbcf697
</span></span></code></pre></div><p>你可以按照自己的需求配置端口、管理员账户、数据库。 MySQL 性能更好哦~</p>
<p>测试运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">./onelist -run server
</span></span></code></pre></div><p>使用 pm2 管理：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">pm2 start ./onelist -- -run server
</span></span></code></pre></div><h3 id="warpgpt">WarpGPT</h3>
<p>这个没什么多说的，可以使用 access_Token 作为 API Key 请求 ChatGPT 接口，也就是所谓的 chat2api 。配合前文的 Refresh-gpt-chat 就可以把永久有效期的 Refresh_token 作为 API Key 来使用，十分的好用。</p>
<p>源仓库没有 Release ，故我的仓库没有做自动检测构建。如果有更新需求需要手动触发 workflow 。你有需要也可以自己fork一份然后手动触发 workflow 。</p>
<p>首先在 Panel 中放行一个端口，接着按照下表 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的USERNAME.serv00.net删掉后重新添加）
Website Type	proxy
Proxy Target	localhost
Proxy URL	留空
Proxy port	你准备用来部署 WarpGPT 的端口
Use HTPPS	False
DNS support	True
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
接着SSH登入，并进入刚刚你新建的域名目录下的 public_html 路径下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 下载二进制文件</span>
</span></span><span class="line"><span class="cl">wget https://github.com/k0baya/warpgpt-freebsd/releases/download/latest/warpgpt <span class="o">&amp;&amp;</span> chmod +x warpgpt
</span></span></code></pre></div><p>添加启动脚本：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cat &gt; start.sh <span class="s">&lt;&lt; EOF
</span></span></span><span class="line"><span class="cl"><span class="s">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="s">export TMPDIR=&#34;$PWD&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">chmod +x warpgpt &amp;&amp; exec ./warpgpt
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span></code></pre></div><p>给启动脚本赋权：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod +x start.sh
</span></span></code></pre></div><p>配置环境变量：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cat &gt; .env <span class="s">&lt;&lt; EOF
</span></span></span><span class="line"><span class="cl"><span class="s">proxy = &#34;http://127.0.0.1:10809&#34;   #代理地址 （选填）
</span></span></span><span class="line"><span class="cl"><span class="s">port = 5000                        #程序运行端口
</span></span></span><span class="line"><span class="cl"><span class="s">host = &#39;127.0.0.1&#39;                 #可访问ip，0.0.0.0允许所有ip
</span></span></span><span class="line"><span class="cl"><span class="s">verify = false                     #是否对访问进行验证
</span></span></span><span class="line"><span class="cl"><span class="s">auth_key = &#34;&#34;                      #若开启访问验证，则需要在Header中添加AuthKey字段，且值为auth_key的值才能访问 （选填）
</span></span></span><span class="line"><span class="cl"><span class="s">arkose_must = false                #是否强行gpt3.5进行验证
</span></span></span><span class="line"><span class="cl"><span class="s">OpenAI_HOST = &#34;chat.openai.com&#34;    #openai网页api接口地址 （选填）
</span></span></span><span class="line"><span class="cl"><span class="s">openai_api_host = &#34;api.openai.com&#34; #openai官方api接口 （选填）
</span></span></span><span class="line"><span class="cl"><span class="s">proxy_pool_url=&#34;&#34;                  #ipidea代理池链接 （选填）
</span></span></span><span class="line"><span class="cl"><span class="s">#示例http://api.proxy.ipidea.io/getProxyIp?num=10&amp;return_type=json&amp;lb=1&amp;sb=0&amp;flow=1&amp;regions=us&amp;protocol=http，根据访问频次设置num值
</span></span></span><span class="line"><span class="cl"><span class="s">log_level = &#34;debug&#34;                #日志等级
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">redis_address = &#34;127.0.0.1:6379&#34;   #redis地址（若不开启代理池可选填）
</span></span></span><span class="line"><span class="cl"><span class="s">redis_passwd = &#34;&#34;                  #redis密码
</span></span></span><span class="line"><span class="cl"><span class="s">redis_db = 0                       #选择的redis数据库
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span></code></pre></div><p>如果有 redis 需求，可以查阅官方文档：Redis</p>
<p>使用 pm2 管理运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">pm2 start bash --name warpgpt -- start.sh
</span></span></code></pre></div><h3 id="coze-discord-proxy">Coze-discord-proxy</h3>
<p>代理 Discord 对话 Coze-Bot ，实现以 API 形式请求 GPT4 模型，提供对话、文生图、图生文、知识库检索等功能。功能不多赘述，详细去源仓库查看。</p>
<p>同样的，我写了一个用于构建 FreeBSD 版本的仓库。在这里感谢论坛用户 Reno 的测试，没有测试人员的测试，也不会有部署的过程记录了。</p>
<p>首先在 Panel 中放行一个端口，接着按照下表 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的USERNAME.serv00.net删掉后重新添加）
Website Type	proxy
Proxy Target	localhost
Proxy URL	留空
Proxy port	你准备用来部署 Coze-discord-proxy 的端口
Use HTPPS	False
DNS support	True
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
接着SSH登入，并进入刚刚你新建的域名目录下的 public_html 路径下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 下载二进制文件</span>
</span></span><span class="line"><span class="cl"><span class="nv">release_info</span><span class="o">=</span><span class="k">$(</span>curl -s https://api.github.com/repos/k0baya/coze-discord-proxy-freebsd/releases/latest<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">asset_url</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$release_info</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.assets[] | select(.name != &#34;source code&#34;) | .browser_download_url&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">curl -L -o coze-discord-proxy <span class="s2">&#34;</span><span class="nv">$asset_url</span><span class="s2">&#34;</span> <span class="o">&amp;&amp;</span> chmod +x coze-discord-proxy
</span></span></code></pre></div><p>添加启动脚本：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cat &gt; start.sh <span class="s">&lt;&lt; EOF
</span></span></span><span class="line"><span class="cl"><span class="s">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="s"># 根据你的需求自行填入环境变量
</span></span></span><span class="line"><span class="cl"><span class="s">export PORT=&#34;PORT&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">export USER_AUTHORIZATION=&#34;XXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">export BOT_TOKEN=&#34;XXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">export GUILD_ID=&#34;XXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">export COZE_BOT_ID=&#34;XXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">export PROXY_SECRET=&#34;XXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">export CHANNEL_ID=&#34;XXXXXX&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">export TZ=&#34;Asia/Shanghai&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">export DATA_GYM_CACHE_DIR=&#34;$PWD&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">chmod +x coze-discord-proxy &amp;&amp; exec ./coze-discord-proxy
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span></code></pre></div><p>给启动脚本赋权：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod +x coze-discord-proxy
</span></span></code></pre></div><p>添加多机器人配置文件：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">mkdir -p app/coze-discord-proxy/data/config
</span></span><span class="line"><span class="cl">touch app/coze-discord-proxy/data/config/bot_config.json
</span></span></code></pre></div><p>然后回到 Panel 中，进入File manager选项卡，进入 bot_config.json 所在路径，右键点击它，选择View/Edit &gt; Source Editor，进行编辑：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>
</span></span><span class="line"><span class="cl">  <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;proxySecret&#34;</span>: <span class="s2">&#34;123&#34;</span>, // 接口请求密钥<span class="o">(</span>PROXY_SECRET<span class="o">)(</span>注意:此密钥在环境变量PROXY_SECRET中存在时该Bot才可以被匹配到!<span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;cozeBotId&#34;</span>: <span class="s2">&#34;12***************31&#34;</span>, // coze托管的机器人ID
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;model&#34;</span>: <span class="o">[</span><span class="s2">&#34;gpt-3.5&#34;</span>,<span class="s2">&#34;gpt-3.5-16k&#34;</span><span class="o">]</span>, // 模型名称<span class="o">(</span>数组格式<span class="o">)(</span>与请求参数中的model对应,如请求中的model在该json中未匹配到则会抛出异常<span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;channelId&#34;</span>: <span class="s2">&#34;12***************56&#34;</span>  // <span class="o">[</span>可选<span class="o">]</span>discord频道ID<span class="o">(</span>机器人必须在此频道所在的服务器<span class="o">)(</span>目前版本下该参数仅用来活跃机器人<span class="o">)</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>,
</span></span><span class="line"><span class="cl">  <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;proxySecret&#34;</span>: <span class="s2">&#34;456&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;cozeBotId&#34;</span>: <span class="s2">&#34;12***************64&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;model&#34;</span>: <span class="o">[</span><span class="s2">&#34;gpt-4&#34;</span>,<span class="s2">&#34;gpt-4-16k&#34;</span><span class="o">]</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;channelId&#34;</span>: <span class="s2">&#34;12***************78&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>,
</span></span><span class="line"><span class="cl">  <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;proxySecret&#34;</span>: <span class="s2">&#34;789&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;cozeBotId&#34;</span>: <span class="s2">&#34;12***************12&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;model&#34;</span>: <span class="o">[</span><span class="s2">&#34;dall-e-3&#34;</span><span class="o">]</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;channelId&#34;</span>: <span class="s2">&#34;12***************24&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">]</span>
</span></span></code></pre></div><p>使用 pm2 管理运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pm2 start bash --name coze-discord-proxy -- start.sh
</span></span></code></pre></div><h3 id="memos">Memos</h3>
<p>一款开源、轻量级的笔记服务。轻松捕捉并分享您的精彩想法。</p>
<p>这个仓库比较难受的是，其在源码的这个位置强制要求其 gRPC 服务的端口为 Memos 监听端口+1，故这个应用需要占用两个端口，而且必须是两个连续的端口。</p>
<p>同样的，我写了一个用于构建 FreeBSD 版本的仓库。</p>
<p>首先在 Panel 中放行两个相邻的端口，接着按照下表 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的USERNAME.serv00.net删掉后重新添加）
Website Type	proxy
Proxy Target	localhost
Proxy URL	留空
Proxy port	刚刚放行的两个相邻的端口中小的那一个
Use HTPPS	False
DNS support	True
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
接着SSH登入，并进入刚刚你新建的域名目录下的 public_html 路径下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">API_URL</span><span class="o">=</span><span class="s2">&#34;https://api.github.com/repos/k0baya/memos-binary/releases/latest&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">DOWNLOAD_URL</span><span class="o">=</span><span class="k">$(</span>curl -s <span class="nv">$API_URL</span> <span class="p">|</span> jq -r <span class="s2">&#34;.assets[] | select(.name == \&#34;memos-freebsd-amd64.tar.gz\&#34;) | .browser_download_url&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">curl -L <span class="nv">$DOWNLOAD_URL</span> -o memos-freebsd-amd64.tar.gz
</span></span><span class="line"><span class="cl">tar -xzvf memos-freebsd-amd64.tar.gz <span class="o">&amp;&amp;</span> rm memos-freebsd-amd64.tar.gz <span class="o">&amp;&amp;</span> chmod +x memos
</span></span></code></pre></div><p>关于运行，有两种方式进行：</p>
<p>① SQLite</p>
<p>如果选择使用 SQLite 作为数据库运行，则可以直接运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 假定你的数据文件打算存储在 /home/username/domains/xxx.USERNAME.serv00.net/public_html/data</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 新建数据文件夹</span>
</span></span><span class="line"><span class="cl">mkdir -p /home/username/domains/xxx.USERNAME.serv00.net/public_html/data
</span></span><span class="line"><span class="cl"><span class="c1"># 测试运行</span>
</span></span><span class="line"><span class="cl">./memos --mode prod --port PORT --data /home/username/domains/xxx.USERNAME.serv00.net/public_html/data
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 pm2 管理</span>
</span></span><span class="line"><span class="cl">pm2 start ./memos --name memos -- --mode prod --port PORT --data /home/username/domains/xxx.USERNAME.serv00.net/public_html/data
</span></span></code></pre></div><p>② 外接 MySQL / PostgreSQL</p>
<p>你可以使用面板自带的 MySQL / PostgreSQL 新建数据库，或者使用其他平台提供的远程数据库：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 假定你的数据文件打算存储在 /home/username/domains/xxx.USERNAME.serv00.net/public_html/data</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 新建数据文件夹</span>
</span></span><span class="line"><span class="cl">mkdir -p /home/username/domains/xxx.USERNAME.serv00.net/public_html/data
</span></span><span class="line"><span class="cl"><span class="c1"># 测试运行（MySQL）（MySQL需要管理员权限，你可以选择远程连接）</span>
</span></span><span class="line"><span class="cl">./memos --mode prod --port PORT --data /home/username/domains/xxx.USERNAME.serv00.net/public_html/data --driver mysql --dsn mysql://root:password123localhost:3306/mydb
</span></span><span class="line"><span class="cl"><span class="c1"># 测试运行（PostgreSQL）</span>
</span></span><span class="line"><span class="cl">./memos --mode prod --port PORT --data /home/username/domains/xxx.USERNAME.serv00.net/public_html/data --driver postgres --dsn postgresql://user:password123localhost:5432/mydb?sslmode<span class="o">=</span>disable
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 pm2 管理（MySQL）（MySQL需要管理员权限，你可以选择远程连接）</span>
</span></span><span class="line"><span class="cl">pm2 start ./memos --name memos -- --mode prod --port PORT --data /home/username/domains/xxx.USERNAME.serv00.net/public_html/data --driver mysql --dsn mysql://root:password123localhost:3306/mydb
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 pm2 管理（PostgreSQL）</span>
</span></span><span class="line"><span class="cl">pm2 start ./memos --name memos -- --mode prod --port PORT --data /home/username/domains/xxx.USERNAME.serv00.net/public_html/data --driver postgres --dsn postgresql://user:password123localhost:5432/mydb?sslmode<span class="o">=</span>disable
</span></span></code></pre></div><h3 id="frps">Frps</h3>
<p>内网穿透嘛，懂的都懂，这里只做服务端的部署记录，客户端可以查看 Frp 的官方文档自行配置。感谢群友的率先测试：youyi</p>
<p>首先在 Panel 中放行两个端口，接着按照下表 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的USERNAME.serv00.net删掉后重新添加）
Website Type	proxy
Proxy Target	localhost
Proxy URL	留空
Proxy port	你准备用来映射转发内网服务的端口
Use HTPPS	False
DNS support	True
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
同样的，你可以设置多个域名使用 Proxy 指向同一个端口，在 Frpc 客户端配置中使用域名分发不同的服务。具体可以查阅官方文档。</p>
<p>接着SSH登入，并进入刚刚你新建的域名目录下的 public_html 路径下</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">release_info</span><span class="o">=</span><span class="k">$(</span>curl -s https://api.github.com/repos/fatedier/frp/releases/latest<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">download_url</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$release_info</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.assets[] | select(.name | contains(&#34;freebsd_amd64.tar.gz&#34;)) | .browser_download_url&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">curl -L <span class="s2">&#34;</span><span class="nv">$download_url</span><span class="s2">&#34;</span> -o frp_freebsd_amd64.tar.gz 
</span></span><span class="line"><span class="cl">tar -xzvf frp_freebsd_amd64.tar.gz --strip-components<span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">rm -rf frp_freebsd_amd64.tar.gz
</span></span></code></pre></div><p>接着编辑配置文件：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 按照自己的实际情况和需求进行配置，这里只做最简单的http转发配置示例</span>
</span></span><span class="line"><span class="cl">cat &gt; frps.toml <span class="s">&lt;&lt; EOF
</span></span></span><span class="line"><span class="cl"><span class="s">bindPort = 监听端口
</span></span></span><span class="line"><span class="cl"><span class="s">vhostHTTPPort = 映射转发端口
</span></span></span><span class="line"><span class="cl"><span class="s">auth.token = &#34;密码&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span></code></pre></div><p>运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">pm2 start ./frps -- -c frps.toml
</span></span><span class="line"><span class="cl">客户端配置示例：
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">TOML
</span></span><span class="line"><span class="cl"><span class="nv">serverAddr</span> <span class="o">=</span> <span class="s2">&#34;x.x.x.x&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">serverPort</span> <span class="o">=</span> Frps 的监听端口
</span></span><span class="line"><span class="cl">auth.token <span class="o">=</span> <span class="s2">&#34;密码&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[[</span>proxies<span class="o">]]</span>
</span></span><span class="line"><span class="cl"><span class="nv">name</span> <span class="o">=</span> <span class="s2">&#34;web&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">type</span> <span class="o">=</span> <span class="s2">&#34;http&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">localPort</span> <span class="o">=</span> <span class="m">80</span>
</span></span><span class="line"><span class="cl"><span class="nv">customDomains</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&#34;www.yourdomain.com&#34;</span><span class="o">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[[</span>proxies<span class="o">]]</span>
</span></span><span class="line"><span class="cl"><span class="nv">name</span> <span class="o">=</span> <span class="s2">&#34;web2&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">type</span> <span class="o">=</span> <span class="s2">&#34;http&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">localPort</span> <span class="o">=</span> <span class="m">8080</span>
</span></span><span class="line"><span class="cl"><span class="nv">customDomains</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&#34;www.yourdomain2.com&#34;</span><span class="o">]</span>
</span></span></code></pre></div><h3 id="rclone">Rclone</h3>
<p>Rclone 是一款管理云存储文件的命令行程序。它功能丰富，可替代云供应商的网络存储界面。超过 70 种云存储产品支持 Rclone，包括 S3 对象存储、企业和消费者文件存储服务以及标准传输协议。</p>
<p>具体用法与配置请查阅其官方文档。</p>
<p>如果你需要使用 Rclone 的 web ui ，你可以按照前文所述的大多数应用一样，先放行端口，添加域名，申请好 SSL 证书，并进入其目录下的 public_html 路径下再进行程序本体的下载部署。</p>
<p>下载最新版 Rclone：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">release_info</span><span class="o">=</span><span class="k">$(</span>curl -s https://api.github.com/repos/rclone/rclone/releases/latest<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">download_url</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$release_info</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.assets[] | select(.name | contains(&#34;-freebsd-amd64.zip&#34;)) | .browser_download_url&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">curl -L <span class="s2">&#34;</span><span class="nv">$download_url</span><span class="s2">&#34;</span> -o rclone-freebsd-amd64.zip
</span></span><span class="line"><span class="cl"><span class="nv">outer_folder</span><span class="o">=</span><span class="k">$(</span>unzip -l rclone-freebsd-amd64.zip <span class="p">|</span> grep <span class="s1">&#39;/&#39;</span> <span class="p">|</span> sed -n <span class="s1">&#39;1p&#39;</span> <span class="p">|</span> sed <span class="s1">&#39;s#^.* \([^/]*\)/.*$#\1#&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">unzip rclone-freebsd-amd64.zip
</span></span><span class="line"><span class="cl">mv <span class="s2">&#34;</span><span class="nv">$outer_folder</span><span class="s2">&#34;</span>/* . <span class="o">&amp;&amp;</span> rm -rf <span class="s2">&#34;</span><span class="nv">$outer_folder</span><span class="s2">&#34;</span> rclone-freebsd-amd64.zip
</span></span></code></pre></div><p>经我测试，目前 v1.63.1 之后的版本的 FreeBSD 版的构建都有无法识别 mount 命令的问题，在我查阅其 issue —— #7432 、 #5843 后，确定这个 bug 已经好几个月没有修复了。所以我建议在此 bug 修复前，使用 v1.63.1 版本。</p>
<p>下载 v1.63.1 版本 Rclone ：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">curl -L https://github.com/rclone/rclone/releases/download/v1.63.1/rclone-v1.63.1-freebsd-amd64.zip -o rclone-freebsd-amd64.zip
</span></span><span class="line"><span class="cl"><span class="nv">outer_folder</span><span class="o">=</span><span class="k">$(</span>unzip -l rclone-freebsd-amd64.zip <span class="p">|</span> grep <span class="s1">&#39;/&#39;</span> <span class="p">|</span> sed -n <span class="s1">&#39;1p&#39;</span> <span class="p">|</span> sed <span class="s1">&#39;s#^.* \([^/]*\)/.*$#\1#&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">unzip rclone-freebsd-amd64.zip
</span></span><span class="line"><span class="cl">mv <span class="s2">&#34;</span><span class="nv">$outer_folder</span><span class="s2">&#34;</span>/* . <span class="o">&amp;&amp;</span> rm -rf <span class="s2">&#34;</span><span class="nv">$outer_folder</span><span class="s2">&#34;</span> rclone-freebsd-amd64.zip
</span></span></code></pre></div><p>配置 Rclone 的存储：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">./rclone config
</span></span></code></pre></div><p>启动 web ui：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">./rclone rcd --rc-web-gui --rc-user 用户名 --rc-pass 密码 --rc-addr :端口
</span></span></code></pre></div><p>pm2 管理 web ui：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">pm2 start ./rclone -- rcd --rc-web-gui --rc-user 用户名 --rc-pass 密码 --rc-addr :端口
</span></span></code></pre></div><h3 id="cloudreve">Cloudreve</h3>
<p>Cloudreve 可助你即刻构建出兼备自用或公用的网盘服务，通过多种存储策略的支持、虚拟文件系统等特性实现灵活的文件管理体验。</p>
<p>同样的，我编写了一个用于自动化构建 FreeBSD 版本的 Cloudreve 的仓库：k0baya/cloudreve-freebsd 前后端分离构建，前端静态文件在 Cloudreve 本体同路径下的 static 文件夹内。</p>
<p>首先在 Panel 中放行一个端口，接着按照下表 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的USERNAME.serv00.net删掉后重新添加）
Website Type	proxy
Proxy Target	localhost
Proxy URL	留空
Proxy port	你准备用来部署 Cloudreve 的端口
Use HTPPS	False
DNS support	True
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
接着SSH登入，并进入刚刚你新建的域名目录下的 public_html 路径下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">release_info</span><span class="o">=</span><span class="k">$(</span>curl -s https://api.github.com/repos/k0baya/cloudreve-freebsd/releases/latest<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">download_url</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$release_info</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.assets[] | select(.name | contains(&#34;freebsd-amd64.tar.gz&#34;)) | .browser_download_url&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">curl -L <span class="s2">&#34;</span><span class="nv">$download_url</span><span class="s2">&#34;</span> -o cloudreve-freebsd-amd64.tar.gz 
</span></span><span class="line"><span class="cl">tar -xzvf cloudreve-freebsd-amd64.tar.gz
</span></span><span class="line"><span class="cl">rm -rf cloudreve-freebsd-amd64.tar.gz
</span></span></code></pre></div><p>Cloudreve 在首次启动时，会创建初始管理员账号，请注意保管管理员密码，此密码只会在首次启动时出现。如果您忘记初始管理员密码，需要删除同级目录下的 cloudreve.db ，重新启动主程序以初始化新的管理员账户。</p>
<p>Cloudreve 默认会监听 5212 端口。首次启动时，Cloudreve 会在同级目录下创建名为 conf.ini 的配置文件，你可以修改此文件进行一些参数的配置（比如端口），保存后需要重新启动 Cloudreve 生效。</p>
<p>一个完整的配置文件示例如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">INI
</span></span><span class="line"><span class="cl"><span class="o">[</span>System<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> 运行模式
</span></span><span class="line"><span class="cl"><span class="nv">Mode</span> <span class="o">=</span> master
</span></span><span class="line"><span class="cl"><span class="p">;</span> 监听端口
</span></span><span class="line"><span class="cl"><span class="nv">Listen</span> <span class="o">=</span> :5212
</span></span><span class="line"><span class="cl"><span class="p">;</span> 是否开启 Debug
</span></span><span class="line"><span class="cl"><span class="nv">Debug</span> <span class="o">=</span> <span class="nb">false</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> Session 密钥, 一般在首次启动时自动生成
</span></span><span class="line"><span class="cl"><span class="nv">SessionSecret</span> <span class="o">=</span> <span class="m">23333</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> Hash 加盐, 一般在首次启动时自动生成
</span></span><span class="line"><span class="cl"><span class="nv">HashIDSalt</span> <span class="o">=</span> something really hard to guss
</span></span><span class="line"><span class="cl"><span class="p">;</span> 呈递客户端 IP 时使用的 Header
</span></span><span class="line"><span class="cl"><span class="nv">ProxyHeader</span> <span class="o">=</span> X-Forwarded-For
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">;</span> SSL 相关
</span></span><span class="line"><span class="cl"><span class="o">[</span>SSL<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> SSL 监听端口
</span></span><span class="line"><span class="cl"><span class="nv">Listen</span> <span class="o">=</span> :443
</span></span><span class="line"><span class="cl"><span class="p">;</span> 证书路径
</span></span><span class="line"><span class="cl"><span class="nv">CertPath</span> <span class="o">=</span> C:<span class="se">\U</span>sers<span class="se">\i\D</span>ocuments<span class="se">\f</span>ullchain.pem
</span></span><span class="line"><span class="cl"><span class="p">;</span> 私钥路径
</span></span><span class="line"><span class="cl"><span class="nv">KeyPath</span> <span class="o">=</span> C:<span class="se">\U</span>sers<span class="se">\i\D</span>ocuments<span class="se">\p</span>rivkey.pem
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">;</span> 启用 Unix Socket 监听
</span></span><span class="line"><span class="cl"><span class="o">[</span>UnixSocket<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Listen</span> <span class="o">=</span> /run/cloudreve/cloudreve.sock
</span></span><span class="line"><span class="cl"><span class="p">;</span> 设置产生的 socket 文件的权限
</span></span><span class="line"><span class="cl"><span class="nv">Perm</span> <span class="o">=</span> <span class="m">0666</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">;</span> 数据库相关，如果你只想使用内置的 SQLite 数据库，这一部分直接删去即可
</span></span><span class="line"><span class="cl"><span class="o">[</span>Database<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> 数据库类型，目前支持 sqlite/mysql/mssql/postgres
</span></span><span class="line"><span class="cl"><span class="nv">Type</span> <span class="o">=</span> mysql
</span></span><span class="line"><span class="cl"><span class="p">;</span> MySQL 端口
</span></span><span class="line"><span class="cl"><span class="nv">Port</span> <span class="o">=</span> <span class="m">3306</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> 用户名
</span></span><span class="line"><span class="cl"><span class="nv">User</span> <span class="o">=</span> root
</span></span><span class="line"><span class="cl"><span class="p">;</span> 密码
</span></span><span class="line"><span class="cl"><span class="nv">Password</span> <span class="o">=</span> root
</span></span><span class="line"><span class="cl"><span class="p">;</span> 数据库地址
</span></span><span class="line"><span class="cl"><span class="nv">Host</span> <span class="o">=</span> 127.0.0.1
</span></span><span class="line"><span class="cl"><span class="p">;</span> 数据库名称
</span></span><span class="line"><span class="cl"><span class="nv">Name</span> <span class="o">=</span> v3
</span></span><span class="line"><span class="cl"><span class="p">;</span> 数据表前缀
</span></span><span class="line"><span class="cl"><span class="nv">TablePrefix</span> <span class="o">=</span> cd_
</span></span><span class="line"><span class="cl"><span class="p">;</span> 字符集
</span></span><span class="line"><span class="cl"><span class="nv">Charset</span> <span class="o">=</span> utf8mb4
</span></span><span class="line"><span class="cl"><span class="p">;</span> SQLite 数据库文件路径
</span></span><span class="line"><span class="cl"><span class="nv">DBFile</span> <span class="o">=</span> cloudreve.db
</span></span><span class="line"><span class="cl"><span class="p">;</span> 进程退出前安全关闭数据库连接的缓冲时间
</span></span><span class="line"><span class="cl"><span class="nv">GracePeriod</span> <span class="o">=</span> <span class="m">30</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> 使用 Unix Socket 连接到数据库
</span></span><span class="line"><span class="cl"><span class="nv">UnixSocket</span> <span class="o">=</span> <span class="nb">false</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">;</span> 从机模式下的配置
</span></span><span class="line"><span class="cl"><span class="o">[</span>Slave<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> 通信密钥
</span></span><span class="line"><span class="cl"><span class="nv">Secret</span> <span class="o">=</span> <span class="m">1234567891234567123456789123456712345678912345671234567891234567</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> 回调请求超时时间 <span class="o">(</span>s<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">CallbackTimeout</span> <span class="o">=</span> <span class="m">20</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> 签名有效期
</span></span><span class="line"><span class="cl"><span class="nv">SignatureTTL</span> <span class="o">=</span> <span class="m">60</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">;</span> 跨域配置
</span></span><span class="line"><span class="cl"><span class="o">[</span>CORS<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">AllowOrigins</span> <span class="o">=</span> *
</span></span><span class="line"><span class="cl"><span class="nv">AllowMethods</span> <span class="o">=</span> OPTIONS,GET,POST
</span></span><span class="line"><span class="cl"><span class="nv">AllowHeaders</span> <span class="o">=</span> *
</span></span><span class="line"><span class="cl"><span class="nv">AllowCredentials</span> <span class="o">=</span> <span class="nb">false</span>
</span></span><span class="line"><span class="cl"><span class="nv">SameSite</span> <span class="o">=</span> Default
</span></span><span class="line"><span class="cl"><span class="nv">Secure</span> <span class="o">=</span> lse
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">;</span> Redis 相关
</span></span><span class="line"><span class="cl"><span class="o">[</span>Redis<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Server</span> <span class="o">=</span> 127.0.0.1:6379
</span></span><span class="line"><span class="cl"><span class="nv">Password</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl"><span class="nv">DB</span> <span class="o">=</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">;</span> 从机配置覆盖
</span></span><span class="line"><span class="cl"><span class="o">[</span>OptionOverwrite<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> 可直接使用 <span class="sb">`</span><span class="nv">设置名称</span> <span class="o">=</span> 值<span class="sb">`</span> 的格式覆盖
</span></span><span class="line"><span class="cl"><span class="nv">max_worker_num</span> <span class="o">=</span> <span class="m">50</span>
</span></span></code></pre></div><p>你可以使用 vim 或者 Panel 中的 File manager 选项卡，进入 conf.ini 所在路径路径，右键点击，选择 View/Edit &gt; Source Editor ，进行编辑。</p>
<p>修改完配置文件后，测试启动：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">./cloudreve
</span></span></code></pre></div><p>使用 pm2 管理：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pm2 start ./cloudreve
</span></span></code></pre></div><h3 id="panindex">PanIndex</h3>
<p>一个简易的网盘目录列表。</p>
<p>同样的，我编写了一个用于自动化构建 FreeBSD 版本的 PanIndex 的仓库：k0baya/panindex-freebsd。</p>
<p>后台地址（默认）：http://ip:port/admin
默认账号：admin
默认密码：PanIndex</p>
<p>首先在 Panel 中放行一个端口，接着按照下表 Add a New Website ：</p>
<p>Key	Value
Domain	xxx.USERNAME.serv00.net（也可以把原有的USERNAME.serv00.net删掉后重新添加）
Website Type	proxy
Proxy Target	localhost
Proxy URL	留空
Proxy port	你准备用来部署 PanIndex 的端口
Use HTPPS	False
DNS support	True
添加完新站点后，继续点击上方的 Manage SSL certificates ，接着在出口 IP 的右侧点击 Manage ，再点击 Add certificate ：</p>
<p>Type	Domain
Generate Let’s Encrypted certificate	与刚刚添加的站点域名保持一致（如果是原有的USERNAME.serv00.net ，可以省略此步）
接着SSH登入，并进入刚刚你新建的域名目录下的 public_html 路径下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">release_info</span><span class="o">=</span><span class="k">$(</span>curl -s https://api.github.com/repos/k0baya/panindex-freebsd/releases/latest<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">asset_url</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$release_info</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.assets[] | select(.name != &#34;source code&#34;) | .browser_download_url&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">curl -L -o panindex <span class="s2">&#34;</span><span class="nv">$asset_url</span><span class="s2">&#34;</span> <span class="o">&amp;&amp;</span> chmod +x panindex
</span></span></code></pre></div><p>创建配置文件：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cat &gt; config.json <span class="s">&lt;&lt; EOF
</span></span></span><span class="line"><span class="cl"><span class="s">{
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;host&#34;: &#34;0.0.0.0&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;port&#34;: 5238,
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;log_level&#34;: &#34;info&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;data_path&#34;: &#34;&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;cert_file&#34;: &#34;&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;key_file&#34;: &#34;&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;config_query&#34;: &#34;&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;db_type&#34;: &#34;&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;dsn&#34;: &#34;&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;ui&#34;: &#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">}
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span></code></pre></div><p>数据库支持 sqlite (默认)、mysql、postgres ，如果需要接入 MySQL 或者 PostgreSQL ，请写成数据库链接的方式填入 dsn 。注意，如果是 Serv00 自带的 PostgreSQL ，请在数据库链接最末加上 ?sslmode=disable 以禁用 SSL 连接。</p>
<p>编写好配置文件后，测试运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">./panindex -c<span class="o">=</span>config.json
</span></span></code></pre></div><p>使用 pm2 管理：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pm2 start ./panindex -- -c<span class="o">=</span>config.json
</span></span></code></pre></div><h2 id="收尾工作">收尾工作</h2>
<p>听说 Serv00 会不定时重启机器，所以我们把 pm2 添加开机自启，可以保证每次重启都能由 pm2 调动 Alist 和 Cloudflared 。而且 Serv00 每三个月内必须要有一次登录面板或者 SSH 连接，不然会删号，也可以通过一个脚本解决问题，接下来我会详细说明。</p>
<h3 id="自动续期">自动续期</h3>
<p>可以用青龙面板的自动任务定期登录SSH解决。在青龙面板中添加Linux依赖 sshpass，然后添加定时任务：名称随意，命令/脚本 sshpass -p &lsquo;密码&rsquo; ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -tt 用户名地址 &ldquo;exit&rdquo;，定时规则 1 1 1 * *。这样就会每个月自动ssh连接一次，实现续期。</p>
<p>你还可以使用自身 SSH 自身的方式进行自动续期，操作如下：</p>
<p>进入一个自己喜欢的路径，使用 cat 命令新建 auto-renew.sh 脚本：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cat &gt; auto-renew.sh <span class="s">&lt;&lt; EOF
</span></span></span><span class="line"><span class="cl"><span class="s">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">while true; do
</span></span></span><span class="line"><span class="cl"><span class="s">  sshpass -p &#39;密码&#39; ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -tt 用户名地址 &#34;exit&#34; &amp;
</span></span></span><span class="line"><span class="cl"><span class="s">  sleep 259200  #30天为259200秒
</span></span></span><span class="line"><span class="cl"><span class="s">done
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span></code></pre></div><p>记得把其中的密码、用户名、ssh的地址修改为你自己的。</p>
<p>给 auto-renew.sh添加可执行权限：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod +x auto-renew.sh
</span></span></code></pre></div><p>使用pm2启动：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pm2 start ./auto-renew.sh
</span></span></code></pre></div><p>这样就会每隔一个月自动执行一次SSH连接，自己SSH自己进行续期。</p>
<h3 id="自动启动">自动启动</h3>
<p>听说 Serv00 的主机会不定时重启，所以需要添加自启任务。</p>
<p>在 Panel 中找到 Cron jobs 选项卡，使用 Add cron job 功能添加任务，Specify time 选择 After reboot，即为重启后运行。Form type 选择 Advanced，Command 写：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">/home/你的用户名/.npm-global/bin/pm2 resurrect
</span></span></code></pre></div><p>记得把你的用户名改为你的用户名</p>
<p>添加完之后，在 SSH 窗口保存 pm2 的当前任务列表快照：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pm2 save
</span></span></code></pre></div><p>这样每次 serv00 不定时重启任务时，都能自动调用 pm2 读取保存的任务列表快照，恢复任务列表。如果在保存了任务列表快照后又改变了任务 pm2 的任务列表，需要重新执行 pm2 save 以更新任务列表。</p>
<p>欢迎进群讨论，一起学习探讨：受虐滑稽</p>
<p>转自： Serv00搭建各种服务
<a href="https://blog.rappit.site/2024/01/27/serv00_logs/">https://blog.rappit.site/2024/01/27/serv00_logs/</a>
作者
Saika</p>

    </main>
  </div>
  <footer>
    <div class="footer-wrapper">
      <p>Made with ❤️ &mdash; Powered by <a href="https://gohugo.io/" target="_blank" rel="external">Hugo</a> and the <a href="https://github.com/bjacquemet/personal-web" target='_blank' rel="external">Personal Web</a> theme. Icons come from the great <a href="https://fontawesome.com/license" target="_blank" rel="external">Font Awesome</a> library</p>
      <p>© Djd1226</p>
    </div>
  </footer>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:500,600|Raleway:400,400i,600" rel="stylesheet">
  

  <script type="text/javascript">
    document.querySelector('.mobile-header').addEventListener('click', function () {
      var om = document.querySelector(".overlay-menu");
      if (document.querySelector('.hamburger').classList.contains("cross")) {
        document.querySelector('.hamburger').classList.remove("cross");
        om.style.display = "none";
        om.style.width = "0%";
        om.style.height = "0%";
      }
      else {
        document.querySelector('.hamburger').classList.add("cross");
        om.style.width = "100%";
        om.style.height = "100vh";
        om.style.display = "block";
      }
    });
  </script>
</body>
</html>
